(function(){for(var $method$$,$noop$$=function $$noop$$$(){},$methods$$="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd table time timeEnd timeStamp trace warn".split(" "),$length$$=$methods$$.length,$console$$=window.console=window.console||{};$length$$--;)$method$$=$methods$$[$length$$],$console$$[$method$$]||($console$$[$method$$]=$noop$$)})();
(function(){var $$$$,$Morris$$,$minutesSpecHelper$$,$secondsSpecHelper$$,$__slice$$=[].slice,$__hasProp$$={}.hasOwnProperty,$__extends$$=function $$__extends$$$($child$$,$parent$$){function $ctor$$(){this.constructor=$child$$}for(var $key$$ in $parent$$)$__hasProp$$.call($parent$$,$key$$)&&($child$$[$key$$]=$parent$$[$key$$]);$ctor$$.prototype=$parent$$.prototype;$child$$.prototype=new $ctor$$;$child$$.__super__=$parent$$.prototype;return $child$$},$__bind$$=function $$__bind$$$($fn$$,$me$$){return function(){return $fn$$.apply($me$$,
arguments)}},$__indexOf$$=[].indexOf||function($item$$){for(var $i$$=0,$l$$=this.length;$i$$<$l$$;$i$$++)if($i$$ in this&&this[$i$$]===$item$$)return $i$$;return-1};$Morris$$=window.Morris={};$$$$=jQuery;$Morris$$.EventEmitter=function(){function $EventEmitter$$(){}$EventEmitter$$.prototype.on=function $$EventEmitter$$$$on$($name$$,$handler$$){null==this.handlers&&(this.handlers={});null==this.handlers[$name$$]&&(this.handlers[$name$$]=[]);return this.handlers[$name$$].push($handler$$)};$EventEmitter$$.prototype.fire=
function $$EventEmitter$$$$fire$(){var $args$$,$handler$$4_name$$,$_i$$,$_len$$,$_ref$$,$_results$$;$handler$$4_name$$=arguments[0];$args$$=2<=arguments.length?$__slice$$.call(arguments,1):[];if(null!=this.handlers&&null!=this.handlers[$handler$$4_name$$]){$_ref$$=this.handlers[$handler$$4_name$$];$_results$$=[];$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$_i$$++)$handler$$4_name$$=$_ref$$[$_i$$],$_results$$.push($handler$$4_name$$.apply(null,$args$$));return $_results$$}};return $EventEmitter$$}();
$Morris$$.commas=function $$Morris$$$commas$($intnum_num$$){var $absnum_strabsnum$$,$ret$$;return null!=$intnum_num$$?($ret$$=0>$intnum_num$$?"-":"",$absnum_strabsnum$$=Math.abs($intnum_num$$),$intnum_num$$=Math.floor($absnum_strabsnum$$).toFixed(0),$ret$$+=$intnum_num$$.replace(/(?=(?:\d{3})+$)(?!^)/g,","),$absnum_strabsnum$$=$absnum_strabsnum$$.toString(),$absnum_strabsnum$$.length>$intnum_num$$.length&&($ret$$+=$absnum_strabsnum$$.slice($intnum_num$$.length)),$ret$$):"-"};$Morris$$.pad2=function $$Morris$$$pad2$($number$$){return(10>
$number$$?"0":"")+$number$$};$Morris$$.Grid=function($_super$$){function $Grid$$($options$$){var $_this$$=this;this.el="string"===typeof $options$$.element?$$$$(document.getElementById($options$$.element)):$$$$($options$$.element);if(null==this.el||0===this.el.length)throw Error("Graph container element not found");"static"===this.el.css("position")&&this.el.css("position","relative");this.options=$$$$.extend({},this.gridDefaults,this.defaults||{},$options$$);"string"===typeof this.options.units&&
(this.options.postUnits=$options$$.units);this.raphael=new Raphael(this.el[0]);this.elementHeight=this.elementWidth=null;this.dirty=!1;this.init&&this.init();this.setData(this.options.data);this.el.bind("mousemove",function($evt$$){var $offset$$;$offset$$=$_this$$.el.offset();return $_this$$.fire("hovermove",$evt$$.pageX-$offset$$.left,$evt$$.pageY-$offset$$.top)});this.el.bind("mouseout",function($evt$$){return $_this$$.fire("hoverout")});this.el.bind("touchstart touchmove touchend",function($evt$$18_offset$$){var $touch$$;
$touch$$=$evt$$18_offset$$.originalEvent.touches[0]||$evt$$18_offset$$.originalEvent.changedTouches[0];$evt$$18_offset$$=$_this$$.el.offset();$_this$$.fire("hover",$touch$$.pageX-$evt$$18_offset$$.left,$touch$$.pageY-$evt$$18_offset$$.top);return $touch$$});this.postInit&&this.postInit()}$__extends$$($Grid$$,$_super$$);$Grid$$.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:0.5,gridTextColor:"#888",gridTextSize:12,hideHover:!1,yLabelFormat:null,numLines:5,
padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"]};$Grid$$.prototype.setData=function $$Grid$$$$setData$($data$$,$redraw$$){var $e$$,$idx$$,$index$$,$maxGoal$$,$minGoal$$,$ret$$,$row$$,$total$$,$ykey$$,$ymax$$,$ymin$$,$yval$$;null==$redraw$$&&($redraw$$=!0);if(null==$data$$||0===$data$$.length)this.data=
[],this.raphael.clear(),null!=this.hover&&this.hover.hide();else if($ymax$$=this.cumulative?0:null,$ymin$$=this.cumulative?0:null,0<this.options.goals.length&&($minGoal$$=Math.min.apply(null,this.options.goals),$maxGoal$$=Math.max.apply(null,this.options.goals),$ymin$$=null!=$ymin$$?Math.min($ymin$$,$minGoal$$):$minGoal$$,$ymax$$=null!=$ymax$$?Math.max($ymax$$,$maxGoal$$):$maxGoal$$),this.data=function(){var $_i$$,$_len$$,$_results$$;$_results$$=[];$index$$=$_i$$=0;for($_len$$=$data$$.length;$_i$$<
$_len$$;$index$$=++$_i$$){$row$$=$data$$[$index$$];$ret$$={};$ret$$.label=$row$$[this.options.xkey];this.options.parseTime?($ret$$.x=$Morris$$.parseDate($ret$$.label),this.options.dateFormat?$ret$$.label=this.options.dateFormat($ret$$.x):"number"===typeof $ret$$.label&&($ret$$.label=(new Date($ret$$.label)).toString())):$ret$$.x=$index$$;$total$$=0;var $JSCompiler_temp_const$$=$ret$$,$_j$$=void 0,$_len1$$=void 0,$_ref$$=void 0,$_results1$$=void 0,$_ref$$=this.options.ykeys,$_results1$$=[];$idx$$=
$_j$$=0;for($_len1$$=$_ref$$.length;$_j$$<$_len1$$;$idx$$=++$_j$$)$ykey$$=$_ref$$[$idx$$],$yval$$=$row$$[$ykey$$],"string"===typeof $yval$$&&($yval$$=parseFloat($yval$$)),null!=$yval$$&&"number"!==typeof $yval$$&&($yval$$=null),null!=$yval$$&&(this.cumulative?$total$$+=$yval$$:null!=$ymax$$?($ymax$$=Math.max($yval$$,$ymax$$),$ymin$$=Math.min($yval$$,$ymin$$)):$ymax$$=$ymin$$=$yval$$),this.cumulative&&null!=$total$$&&($ymax$$=Math.max($total$$,$ymax$$),$ymin$$=Math.min($total$$,$ymin$$)),$_results1$$.push($yval$$);
$JSCompiler_temp_const$$.y=$_results1$$;$_results$$.push($ret$$)}return $_results$$}.call(this),this.options.parseTime&&(this.data=this.data.sort(function($a$$,$b$$){return($a$$.x>$b$$.x)-($b$$.x>$a$$.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.parseTime&&0<this.options.events.length&&(this.events=function(){var $_i$$,$_len$$,$_ref$$,$_results$$;$_ref$$=this.options.events;$_results$$=[];$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$_i$$++)$e$$=
$_ref$$[$_i$$],$_results$$.push($Morris$$.parseDate($e$$));return $_results$$}.call(this),this.xmax=Math.max(this.xmax,Math.max.apply(null,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(null,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",$ymin$$),this.ymax=this.yboundary("max",$ymax$$),this.ymin===this.ymax&&($ymin$$&&(this.ymin-=1),this.ymax+=1),this.yInterval=(this.ymax-this.ymin)/(this.options.numLines-1),this.precision=0<this.yInterval&&
1>this.yInterval?-Math.floor(Math.log(this.yInterval)/Math.log(10)):0,this.dirty=!0,$redraw$$)return this.redraw()};$Grid$$.prototype.yboundary=function $$Grid$$$$yboundary$($boundaryType$$,$currentValue$$){var $boundaryOption_suggestedValue$$;$boundaryOption_suggestedValue$$=this.options["y"+$boundaryType$$];return"string"===typeof $boundaryOption_suggestedValue$$?"auto"===$boundaryOption_suggestedValue$$.slice(0,4)?5<$boundaryOption_suggestedValue$$.length?($boundaryOption_suggestedValue$$=parseInt($boundaryOption_suggestedValue$$.slice(5),
10),null==$currentValue$$?$boundaryOption_suggestedValue$$:Math[$boundaryType$$]($currentValue$$,$boundaryOption_suggestedValue$$)):null!=$currentValue$$?$currentValue$$:0:parseInt($boundaryOption_suggestedValue$$,10):$boundaryOption_suggestedValue$$};$Grid$$.prototype._calc=function $$Grid$$$$_calc$(){var $h$$,$w$$;$w$$=this.el.width();$h$$=this.el.height();if(this.elementWidth!==$w$$||this.elementHeight!==$h$$||this.dirty)if(this.elementWidth=$w$$,this.elementHeight=$h$$,this.dirty=!1,this.left=
this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,this.options.axes&&($h$$=Math.max(this.measureText(this.yAxisFormat(this.ymin),this.options.gridTextSize).width,this.measureText(this.yAxisFormat(this.ymax),this.options.gridTextSize).width),this.left+=$h$$,this.bottom-=1.5*this.options.gridTextSize),this.width=this.right-this.left,this.height=this.bottom-this.top,this.dx=this.width/(this.xmax-this.xmin),
this.dy=this.height/(this.ymax-this.ymin),this.calc)return this.calc()};$Grid$$.prototype.transY=function $$Grid$$$$transY$($y$$){return this.bottom-($y$$-this.ymin)*this.dy};$Grid$$.prototype.transX=function $$Grid$$$$transX$($x$$){return 1===this.data.length?(this.left+this.right)/2:this.left+($x$$-this.xmin)*this.dx};$Grid$$.prototype.redraw=function $$Grid$$$$redraw$(){this.raphael.clear();this._calc();this.drawGrid();this.drawGoals();this.drawEvents();if(this.draw)return this.draw()};$Grid$$.prototype.drawGoals=
function $$Grid$$$$drawGoals$(){var $goal_i$$,$_i$$,$_len$$,$_ref$$,$_results$$;$_ref$$=this.options.goals;$_results$$=[];$goal_i$$=$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$goal_i$$=++$_i$$)$goal_i$$=$_ref$$[$goal_i$$],$_results$$.push(this.drawGoal("M"+this.left+","+this.transY($goal_i$$)+"H"+(this.left+this.width)));return $_results$$};$Grid$$.prototype.drawEvents=function $$Grid$$$$drawEvents$(){var $event$$3_i$$,$_i$$,$_len$$,$_ref$$,$_results$$;$_ref$$=this.events;$_results$$=[];$event$$3_i$$=
$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$event$$3_i$$=++$_i$$)$event$$3_i$$=$_ref$$[$event$$3_i$$],$_results$$.push(this.drawEvent("M"+this.transX($event$$3_i$$)+","+this.bottom+"V"+this.top));return $_results$$};$Grid$$.prototype.drawGrid=function $$Grid$$$$drawGrid$(){var $firstY$$,$lastY$$,$lineY_v$$,$y$$,$_i$$,$_ref$$,$_results$$;if(!(!1===this.options.grid&&!1===this.options.axes)){$firstY$$=this.ymin;$lastY$$=this.ymax;$_results$$=[];$lineY_v$$=$_i$$=$firstY$$;for($_ref$$=this.yInterval;$firstY$$<=
$lastY$$?$_i$$<=$lastY$$:$_i$$>=$lastY$$;$lineY_v$$=$_i$$+=$_ref$$)$lineY_v$$=parseFloat($lineY_v$$.toFixed(this.precision)),$y$$=this.transY($lineY_v$$),this.options.axes&&this.drawYAxisLabel(this.left-this.options.padding/2,$y$$,this.yAxisFormat($lineY_v$$)),this.options.grid?$_results$$.push(this.drawGridLine("M"+this.left+","+$y$$+"H"+(this.left+this.width))):$_results$$.push(void 0);return $_results$$}};$Grid$$.prototype.measureText=function $$Grid$$$$measureText$($text$$,$fontSize$$){var $ret$$,
$tt$$;null==$fontSize$$&&($fontSize$$=12);$tt$$=this.raphael.text(100,100,$text$$).attr("font-size",$fontSize$$);$ret$$=$tt$$.getBBox();$tt$$.remove();return $ret$$};$Grid$$.prototype.yAxisFormat=function $$Grid$$$$yAxisFormat$($label$$){return this.yLabelFormat($label$$)};$Grid$$.prototype.yLabelFormat=function $$Grid$$$$yLabelFormat$($label$$){return"function"===typeof this.options.yLabelFormat?this.options.yLabelFormat($label$$):""+this.options.preUnits+$Morris$$.commas($label$$)+this.options.postUnits};
$Grid$$.prototype.updateHover=function $$Grid$$$$updateHover$($x$$,$y$$){var $hit$$,$_ref$$;$hit$$=this.hitTest($x$$,$y$$);if(null!=$hit$$)return($_ref$$=this.hover).update.apply($_ref$$,$hit$$)};$Grid$$.prototype.drawGoal=function $$Grid$$$$drawGoal$($path$$){return this.raphael.path($path$$).attr("stroke",this.options.goalLineColors[i%this.options.goalLineColors.length]).attr("stroke-width",this.options.goalStrokeWidth)};$Grid$$.prototype.drawEvent=function $$Grid$$$$drawEvent$($path$$){return this.raphael.path($path$$).attr("stroke",
this.options.eventLineColors[i%this.options.eventLineColors.length]).attr("stroke-width",this.options.eventStrokeWidth)};$Grid$$.prototype.drawYAxisLabel=function $$Grid$$$$drawYAxisLabel$($xPos$$,$yPos$$,$text$$){return this.raphael.text($xPos$$,$yPos$$,$text$$).attr("font-size",this.options.gridTextSize).attr("fill",this.options.gridTextColor).attr("text-anchor","end")};$Grid$$.prototype.drawGridLine=function $$Grid$$$$drawGridLine$($path$$){return this.raphael.path($path$$).attr("stroke",this.options.gridLineColor).attr("stroke-width",
this.options.gridStrokeWidth)};return $Grid$$}($Morris$$.EventEmitter);$Morris$$.parseDate=function $$Morris$$$parseDate$($date$$){var $isecs_p$$,$m$$,$msecs_q_secs$$,$n$$,$o$$,$r_ret$$;if("number"===typeof $date$$)return $date$$;$m$$=$date$$.match(/^(\d+) Q(\d)$/);$n$$=$date$$.match(/^(\d+)-(\d+)$/);$o$$=$date$$.match(/^(\d+)-(\d+)-(\d+)$/);$isecs_p$$=$date$$.match(/^(\d+) W(\d+)$/);$msecs_q_secs$$=$date$$.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/);$r_ret$$=$date$$.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/);
return $m$$?(new Date(parseInt($m$$[1],10),3*parseInt($m$$[2],10)-1,1)).getTime():$n$$?(new Date(parseInt($n$$[1],10),parseInt($n$$[2],10)-1,1)).getTime():$o$$?(new Date(parseInt($o$$[1],10),parseInt($o$$[2],10)-1,parseInt($o$$[3],10))).getTime():$isecs_p$$?($r_ret$$=new Date(parseInt($isecs_p$$[1],10),0,1),4!==$r_ret$$.getDay()&&$r_ret$$.setMonth(0,1+(4-$r_ret$$.getDay()+7)%7),$r_ret$$.getTime()+6048E5*parseInt($isecs_p$$[2],10)):$msecs_q_secs$$?$msecs_q_secs$$[6]?($date$$=0,"Z"!==$msecs_q_secs$$[6]&&
($date$$=60*parseInt($msecs_q_secs$$[8],10)+parseInt($msecs_q_secs$$[9],10),"+"===$msecs_q_secs$$[7]&&($date$$=0-$date$$)),Date.UTC(parseInt($msecs_q_secs$$[1],10),parseInt($msecs_q_secs$$[2],10)-1,parseInt($msecs_q_secs$$[3],10),parseInt($msecs_q_secs$$[4],10),parseInt($msecs_q_secs$$[5],10)+$date$$)):(new Date(parseInt($msecs_q_secs$$[1],10),parseInt($msecs_q_secs$$[2],10)-1,parseInt($msecs_q_secs$$[3],10),parseInt($msecs_q_secs$$[4],10),parseInt($msecs_q_secs$$[5],10))).getTime():$r_ret$$?($msecs_q_secs$$=
parseFloat($r_ret$$[6]),$isecs_p$$=Math.floor($msecs_q_secs$$),$msecs_q_secs$$=Math.round(1E3*($msecs_q_secs$$-$isecs_p$$)),$r_ret$$[8]?($date$$=0,"Z"!==$r_ret$$[8]&&($date$$=60*parseInt($r_ret$$[10],10)+parseInt($r_ret$$[11],10),"+"===$r_ret$$[9]&&($date$$=0-$date$$)),Date.UTC(parseInt($r_ret$$[1],10),parseInt($r_ret$$[2],10)-1,parseInt($r_ret$$[3],10),parseInt($r_ret$$[4],10),parseInt($r_ret$$[5],10)+$date$$,$isecs_p$$,$msecs_q_secs$$)):(new Date(parseInt($r_ret$$[1],10),parseInt($r_ret$$[2],10)-
1,parseInt($r_ret$$[3],10),parseInt($r_ret$$[4],10),parseInt($r_ret$$[5],10),$isecs_p$$,$msecs_q_secs$$)).getTime()):(new Date(parseInt($date$$,10),0,1)).getTime()};$Morris$$.Hover=function(){function $Hover$$($options$$){null==$options$$&&($options$$={});this.options=$$$$.extend({},$Morris$$.Hover.defaults,$options$$);this.el=$$$$("<div class='"+this.options["class"]+"'></div>");this.el.hide();this.options.parent.append(this.el)}$Hover$$.defaults={"class":"morris-hover morris-default-style"};$Hover$$.prototype.update=
function $$Hover$$$$update$($html$$,$x$$,$y$$){this.html($html$$);this.show();return this.moveTo($x$$,$y$$)};$Hover$$.prototype.html=function $$Hover$$$$html$($content$$){return this.el.html($content$$)};$Hover$$.prototype.moveTo=function $$Hover$$$$moveTo$($x$$,$y$$){var $hoverHeight$$,$hoverWidth_left$$,$parentHeight$$,$parentWidth_top$$;$parentWidth_top$$=this.options.parent.innerWidth();$parentHeight$$=this.options.parent.innerHeight();$hoverWidth_left$$=this.el.outerWidth();$hoverHeight$$=this.el.outerHeight();
$hoverWidth_left$$=Math.min(Math.max(0,$x$$-$hoverWidth_left$$/2),$parentWidth_top$$-$hoverWidth_left$$);null!=$y$$?($parentWidth_top$$=$y$$-$hoverHeight$$-10,0>$parentWidth_top$$&&($parentWidth_top$$=$y$$+10,$parentWidth_top$$+$hoverHeight$$>$parentHeight$$&&($parentWidth_top$$=$parentHeight$$/2-$hoverHeight$$/2))):$parentWidth_top$$=$parentHeight$$/2-$hoverHeight$$/2;return this.el.css({left:$hoverWidth_left$$+"px",top:$parentWidth_top$$+"px"})};$Hover$$.prototype.show=function $$Hover$$$$show$(){return this.el.show()};
$Hover$$.prototype.hide=function $$Hover$$$$hide$(){return this.el.hide()};return $Hover$$}();$Morris$$.Line=function($_super$$){function $Line$$($options$$){this.hilight=$__bind$$(this.hilight,this);this.onHoverOut=$__bind$$(this.onHoverOut,this);this.onHoverMove=$__bind$$(this.onHoverMove,this);if(!(this instanceof $Morris$$.Line))return new $Morris$$.Line($options$$);$Line$$.__super__.constructor.call(this,$options$$)}$__extends$$($Line$$,$_super$$);$Line$$.prototype.init=function $$Line$$$$init$(){this.pointGrow=
Raphael.animation({r:this.options.pointSize+3},25,"linear");this.pointShrink=Raphael.animation({r:this.options.pointSize},25,"linear");if("always"!==this.options.hideHover)return this.hover=new $Morris$$.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut)};$Line$$.prototype.defaults={lineWidth:3,pointSize:4,lineColors:"#0b62a4 #7A92A3 #4da74d #afd8f8 #edc240 #cb4b4b #9440ed".split(" "),pointWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,
xLabels:"auto",xLabelFormat:null,xLabelMargin:50,continuousLine:!0,hideHover:!1};$Line$$.prototype.calc=function $$Line$$$$calc$(){this.calcPoints();return this.generatePaths()};$Line$$.prototype.calcPoints=function $$Line$$$$calcPoints$(){var $row$$,$y$$,$_i$$,$_len$$,$_ref$$,$_results$$;$_ref$$=this.data;$_results$$=[];$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$_i$$++)$row$$=$_ref$$[$_i$$],$row$$._x=this.transX($row$$.x),$row$$._y=function(){var $_j$$,$_len1$$,$_ref1$$,$_results1$$;$_ref1$$=
$row$$.y;$_results1$$=[];$_j$$=0;for($_len1$$=$_ref1$$.length;$_j$$<$_len1$$;$_j$$++)$y$$=$_ref1$$[$_j$$],null!=$y$$?$_results1$$.push(this.transY($y$$)):$_results1$$.push($y$$);return $_results1$$}.call(this),$_results$$.push($row$$._ymax=Math.min.apply(null,[this.bottom].concat(function(){var $_j$$,$_len1$$,$_ref1$$,$_results1$$;$_ref1$$=$row$$._y;$_results1$$=[];$_j$$=0;for($_len1$$=$_ref1$$.length;$_j$$<$_len1$$;$_j$$++)$y$$=$_ref1$$[$_j$$],null!=$y$$&&$_results1$$.push($y$$);return $_results1$$}())));
return $_results$$};$Line$$.prototype.hitTest=function $$Line$$$$hitTest$($x$$,$y$$){var $index$$,$r$$,$_i$$,$_len$$,$_ref$$;if(0===this.data.length)return null;$_ref$$=this.data.slice(1);$index$$=$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$&&!($r$$=$_ref$$[$index$$],$x$$<($r$$._x+this.data[$index$$]._x)/2);$index$$=++$_i$$);return $index$$};$Line$$.prototype.onHoverMove=function $$Line$$$$onHoverMove$($x$$,$y$$){var $index$$;$index$$=this.hitTest($x$$,$y$$);return this.displayHoverForRow($index$$)};
$Line$$.prototype.onHoverOut=function $$Line$$$$onHoverOut$(){if("auto"===this.options.hideHover)return this.displayHoverForRow(null)};$Line$$.prototype.displayHoverForRow=function $$Line$$$$displayHoverForRow$($index$$){var $_ref$$;if(null!=$index$$)return($_ref$$=this.hover).update.apply($_ref$$,this.hoverContentForRow($index$$)),this.hilight($index$$);this.hover.hide();return this.hilight()};$Line$$.prototype.hoverContentForRow=function $$Line$$$$hoverContentForRow$($content$$1_index$$){var $j$$,
$row$$,$y$$,$_i$$,$_len$$,$_ref$$;$row$$=this.data[$content$$1_index$$];if("function"===typeof this.options.hoverCallback)$content$$1_index$$=this.options.hoverCallback($content$$1_index$$,this.options);else{$content$$1_index$$="<div class='morris-hover-row-label'>"+$row$$.label+"</div>";$_ref$$=$row$$.y;$j$$=$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$j$$=++$_i$$)$y$$=$_ref$$[$j$$],$content$$1_index$$+="<div class='morris-hover-point' style='color: "+this.colorFor($row$$,$j$$,"label")+"'>\n  "+
this.options.labels[$j$$]+":\n  "+this.yLabelFormat($y$$)+"\n</div>"}return[$content$$1_index$$,$row$$._x,$row$$._ymax]};$Line$$.prototype.generatePaths=function $$Line$$$$generatePaths$(){var $c$$,$coords$$,$i$$,$r$$,$smooth$$;return this.paths=function(){var $_i$$,$_ref$$,$_ref1$$,$_results$$;$_results$$=[];$i$$=$_i$$=0;for($_ref$$=this.options.ykeys.length;0<=$_ref$$?$_i$$<$_ref$$:$_i$$>$_ref$$;$i$$=0<=$_ref$$?++$_i$$:--$_i$$)$smooth$$=!0===this.options.smooth||($_ref1$$=this.options.ykeys[$i$$],
0<=$__indexOf$$.call(this.options.smooth,$_ref1$$)),$coords$$=function(){var $_j$$,$_len$$,$_ref2$$,$_results1$$;$_ref2$$=this.data;$_results1$$=[];$_j$$=0;for($_len$$=$_ref2$$.length;$_j$$<$_len$$;$_j$$++)$r$$=$_ref2$$[$_j$$],void 0!==$r$$._y[$i$$]&&$_results1$$.push({x:$r$$._x,y:$r$$._y[$i$$]});return $_results1$$}.call(this),this.options.continuousLine&&($coords$$=function(){var $_j$$,$_len$$,$_results1$$;$_results1$$=[];$_j$$=0;for($_len$$=$coords$$.length;$_j$$<$_len$$;$_j$$++)$c$$=$coords$$[$_j$$],
null!==$c$$.y&&$_results1$$.push($c$$);return $_results1$$}()),1<$coords$$.length?$_results$$.push($Morris$$.Line.createPath($coords$$,$smooth$$,this.bottom)):$_results$$.push(null);return $_results$$}.call(this)};$Line$$.prototype.draw=function $$Line$$$$draw$(){this.options.axes&&this.drawXAxis();this.drawSeries();if(!1===this.options.hideHover)return this.displayHoverForRow(this.data.length-1)};$Line$$.prototype.drawXAxis=function $$Line$$$$drawXAxis$(){var $drawLabel$$,$l$$,$labels$$,$prevLabelMargin$$,
$row$$,$ypos$$,$_i$$0$$,$_len$$0$$,$_results$$0$$,$_this$$=this;$ypos$$=this.bottom+1.25*this.options.gridTextSize;$prevLabelMargin$$=null;$drawLabel$$=function $$drawLabel$$$($labelText$$,$xpos$$){var $label$$,$labelBox$$;$label$$=$_this$$.drawXAxisLabel($_this$$.transX($xpos$$),$ypos$$,$labelText$$);$labelBox$$=$label$$.getBBox();return(null==$prevLabelMargin$$||$prevLabelMargin$$>=$labelBox$$.x+$labelBox$$.width)&&0<=$labelBox$$.x&&$labelBox$$.x+$labelBox$$.width<$_this$$.el.width()?$prevLabelMargin$$=
$labelBox$$.x-$_this$$.options.xLabelMargin:$label$$.remove()};$labels$$=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:$Morris$$.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var $_i$$,$_len$$,$_ref$$,$_results$$;$_ref$$=this.data;$_results$$=[];$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$_i$$++)$row$$=$_ref$$[$_i$$],$_results$$.push([$row$$.label,$row$$.x]);return $_results$$}.call(this);
$labels$$.reverse();$_results$$0$$=[];$_i$$0$$=0;for($_len$$0$$=$labels$$.length;$_i$$0$$<$_len$$0$$;$_i$$0$$++)$l$$=$labels$$[$_i$$0$$],$_results$$0$$.push($drawLabel$$($l$$[0],$l$$[1]));return $_results$$0$$};$Line$$.prototype.drawSeries=function $$Line$$$$drawSeries$(){var $circle$$,$i$$,$_j$$5_path$$,$row$$,$_i$$12__ref1$$,$_ref$$13__results$$;for($i$$=$_i$$12__ref1$$=$_ref$$13__results$$=this.options.ykeys.length-1;0>=$_ref$$13__results$$?0>=$_i$$12__ref1$$:0<=$_i$$12__ref1$$;$i$$=0>=$_ref$$13__results$$?
++$_i$$12__ref1$$:--$_i$$12__ref1$$)$_j$$5_path$$=this.paths[$i$$],null!==$_j$$5_path$$&&this.drawLinePath($_j$$5_path$$,this.colorFor($row$$,$i$$,"line"));this.seriesPoints=function(){var $_j$$,$_ref1$$,$_results$$;$_results$$=[];$i$$=$_j$$=0;for($_ref1$$=this.options.ykeys.length;0<=$_ref1$$?$_j$$<$_ref1$$:$_j$$>$_ref1$$;$i$$=0<=$_ref1$$?++$_j$$:--$_j$$)$_results$$.push([]);return $_results$$}.call(this);$_ref$$13__results$$=[];for($i$$=$_j$$5_path$$=$_i$$12__ref1$$=this.options.ykeys.length-1;0>=
$_i$$12__ref1$$?0>=$_j$$5_path$$:0<=$_j$$5_path$$;$i$$=0>=$_i$$12__ref1$$?++$_j$$5_path$$:--$_j$$5_path$$)$_ref$$13__results$$.push(function(){var $_k$$,$_len$$,$_ref2$$,$_results1$$;$_ref2$$=this.data;$_results1$$=[];$_k$$=0;for($_len$$=$_ref2$$.length;$_k$$<$_len$$;$_k$$++)$row$$=$_ref2$$[$_k$$],$circle$$=null!=$row$$._y[$i$$]?this.drawLinePoint($row$$._x,$row$$._y[$i$$],this.options.pointSize,this.colorFor($row$$,$i$$,"point"),$i$$):null,$_results1$$.push(this.seriesPoints[$i$$].push($circle$$));
return $_results1$$}.call(this));return $_ref$$13__results$$};$Line$$.createPath=function $$Line$$$createPath$($coords$$,$smooth$$,$bottom$$){var $coord$$,$g_y2$$,$grads$$,$i$$7_x1$$,$ix$$,$lg_y1$$,$path$$,$prevCoord_x2$$,$_i$$,$_len$$;$path$$="";$smooth$$&&($grads$$=$Morris$$.Line.gradients($coords$$));$prevCoord_x2$$={y:null};$i$$7_x1$$=$_i$$=0;for($_len$$=$coords$$.length;$_i$$<$_len$$;$i$$7_x1$$=++$_i$$){$coord$$=$coords$$[$i$$7_x1$$];if(null!=$coord$$.y)if(null!=$prevCoord_x2$$.y)$smooth$$?($g_y2$$=
$grads$$[$i$$7_x1$$],$lg_y1$$=$grads$$[$i$$7_x1$$-1],$ix$$=($coord$$.x-$prevCoord_x2$$.x)/4,$i$$7_x1$$=$prevCoord_x2$$.x+$ix$$,$lg_y1$$=Math.min($bottom$$,$prevCoord_x2$$.y+$ix$$*$lg_y1$$),$prevCoord_x2$$=$coord$$.x-$ix$$,$g_y2$$=Math.min($bottom$$,$coord$$.y-$ix$$*$g_y2$$),$path$$+="C"+$i$$7_x1$$+","+$lg_y1$$+","+$prevCoord_x2$$+","+$g_y2$$+","+$coord$$.x+","+$coord$$.y):$path$$+="L"+$coord$$.x+","+$coord$$.y;else if(!$smooth$$||null!=$grads$$[$i$$7_x1$$])$path$$+="M"+$coord$$.x+","+$coord$$.y;$prevCoord_x2$$=
$coord$$}return $path$$};$Line$$.gradients=function $$Line$$$gradients$($coords$$){var $coord$$,$grad$$,$i$$8_prevCoord$$,$nextCoord$$,$_i$$,$_len$$,$_results$$;$grad$$=function $$grad$$$($a$$,$b$$){return($a$$.y-$b$$.y)/($a$$.x-$b$$.x)};$_results$$=[];$i$$8_prevCoord$$=$_i$$=0;for($_len$$=$coords$$.length;$_i$$<$_len$$;$i$$8_prevCoord$$=++$_i$$)$coord$$=$coords$$[$i$$8_prevCoord$$],null!=$coord$$.y?($nextCoord$$=$coords$$[$i$$8_prevCoord$$+1]||{y:null},$i$$8_prevCoord$$=$coords$$[$i$$8_prevCoord$$-
1]||{y:null},null!=$i$$8_prevCoord$$.y&&null!=$nextCoord$$.y?$_results$$.push($grad$$($i$$8_prevCoord$$,$nextCoord$$)):null!=$i$$8_prevCoord$$.y?$_results$$.push($grad$$($i$$8_prevCoord$$,$coord$$)):null!=$nextCoord$$.y?$_results$$.push($grad$$($coord$$,$nextCoord$$)):$_results$$.push(null)):$_results$$.push(null);return $_results$$};$Line$$.prototype.hilight=function $$Line$$$$hilight$($index$$){var $i$$,$_i$$15__j$$,$_ref$$14__ref1$$;if(null!==this.prevHilight&&this.prevHilight!==$index$$){$i$$=
$_i$$15__j$$=0;for($_ref$$14__ref1$$=this.seriesPoints.length-1;0<=$_ref$$14__ref1$$?$_i$$15__j$$<=$_ref$$14__ref1$$:$_i$$15__j$$>=$_ref$$14__ref1$$;$i$$=0<=$_ref$$14__ref1$$?++$_i$$15__j$$:--$_i$$15__j$$)this.seriesPoints[$i$$][this.prevHilight]&&this.seriesPoints[$i$$][this.prevHilight].animate(this.pointShrink)}if(null!==$index$$&&this.prevHilight!==$index$$){$i$$=$_i$$15__j$$=0;for($_ref$$14__ref1$$=this.seriesPoints.length-1;0<=$_ref$$14__ref1$$?$_i$$15__j$$<=$_ref$$14__ref1$$:$_i$$15__j$$>=
$_ref$$14__ref1$$;$i$$=0<=$_ref$$14__ref1$$?++$_i$$15__j$$:--$_i$$15__j$$)this.seriesPoints[$i$$][$index$$]&&this.seriesPoints[$i$$][$index$$].animate(this.pointGrow)}return this.prevHilight=$index$$};$Line$$.prototype.colorFor=function $$Line$$$$colorFor$($row$$,$sidx$$,$type$$){return"function"===typeof this.options.lineColors?this.options.lineColors.call(this,$row$$,$sidx$$,$type$$):"point"===$type$$?this.options.pointFillColors[$sidx$$%this.options.pointFillColors.length]||this.options.lineColors[$sidx$$%
this.options.lineColors.length]:this.options.lineColors[$sidx$$%this.options.lineColors.length]};$Line$$.prototype.drawXAxisLabel=function $$Line$$$$drawXAxisLabel$($xPos$$,$yPos$$,$text$$){return this.raphael.text($xPos$$,$yPos$$,$text$$).attr("font-size",this.options.gridTextSize).attr("fill",this.options.gridTextColor)};$Line$$.prototype.drawLinePath=function $$Line$$$$drawLinePath$($path$$,$lineColor$$){return this.raphael.path($path$$).attr("stroke",$lineColor$$).attr("stroke-width",this.options.lineWidth)};
$Line$$.prototype.drawLinePoint=function $$Line$$$$drawLinePoint$($xPos$$,$yPos$$,$size$$,$pointColor$$,$lineIndex$$){return this.raphael.circle($xPos$$,$yPos$$,$size$$).attr("fill",$pointColor$$).attr("stroke-width",this.strokeWidthForSeries($lineIndex$$)).attr("stroke",this.strokeForSeries($lineIndex$$))};$Line$$.prototype.strokeWidthForSeries=function $$Line$$$$strokeWidthForSeries$($index$$){return this.options.pointWidths[$index$$%this.options.pointWidths.length]};$Line$$.prototype.strokeForSeries=
function $$Line$$$$strokeForSeries$($index$$){return this.options.pointStrokeColors[$index$$%this.options.pointStrokeColors.length]};return $Line$$}($Morris$$.Grid);$Morris$$.labelSeries=function $$Morris$$$labelSeries$($dmin$$,$dmax$$,$d0_pxwidth_ret$$,$spec_specName$$,$d_xLabelFormat$$){var $ddensity_t$$,$name$$57_s$$,$_i$$,$_len$$,$_ref$$;$ddensity_t$$=200*($dmax$$-$dmin$$)/$d0_pxwidth_ret$$;$d0_pxwidth_ret$$=new Date($dmin$$);$spec_specName$$=$Morris$$.LABEL_SPECS[$spec_specName$$];if(void 0===
$spec_specName$$){$_ref$$=$Morris$$.AUTO_LABEL_ORDER;$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$_i$$++)if($name$$57_s$$=$_ref$$[$_i$$],$name$$57_s$$=$Morris$$.LABEL_SPECS[$name$$57_s$$],$ddensity_t$$>=$name$$57_s$$.span){$spec_specName$$=$name$$57_s$$;break}}void 0===$spec_specName$$&&($spec_specName$$=$Morris$$.LABEL_SPECS.second);$d_xLabelFormat$$&&($spec_specName$$=$$$$.extend({},$spec_specName$$,{fmt:$d_xLabelFormat$$}));$d_xLabelFormat$$=$spec_specName$$.start($d0_pxwidth_ret$$);for($d0_pxwidth_ret$$=
[];($ddensity_t$$=$d_xLabelFormat$$.getTime())<=$dmax$$;)$ddensity_t$$>=$dmin$$&&$d0_pxwidth_ret$$.push([$spec_specName$$.fmt($d_xLabelFormat$$),$ddensity_t$$]),$spec_specName$$.incr($d_xLabelFormat$$);return $d0_pxwidth_ret$$};$minutesSpecHelper$$=function $$minutesSpecHelper$$$($interval$$){return{span:6E4*$interval$$,start:function($d$$){return new Date($d$$.getFullYear(),$d$$.getMonth(),$d$$.getDate(),$d$$.getHours())},fmt:function($d$$){return""+$Morris$$.pad2($d$$.getHours())+":"+$Morris$$.pad2($d$$.getMinutes())},
incr:function($d$$){return $d$$.setMinutes($d$$.getMinutes()+$interval$$)}}};$secondsSpecHelper$$=function $$secondsSpecHelper$$$($interval$$){return{span:1E3*$interval$$,start:function($d$$){return new Date($d$$.getFullYear(),$d$$.getMonth(),$d$$.getDate(),$d$$.getHours(),$d$$.getMinutes())},fmt:function($d$$){return""+$Morris$$.pad2($d$$.getHours())+":"+$Morris$$.pad2($d$$.getMinutes())+":"+$Morris$$.pad2($d$$.getSeconds())},incr:function($d$$){return $d$$.setSeconds($d$$.getSeconds()+$interval$$)}}};
$Morris$$.LABEL_SPECS={decade:{span:1728E8,start:function $$Morris$$$LABEL_SPECS$decade$start$($d$$){return new Date($d$$.getFullYear()-$d$$.getFullYear()%10,0,1)},fmt:function $$Morris$$$LABEL_SPECS$decade$fmt$($d$$){return""+$d$$.getFullYear()},incr:function $$Morris$$$LABEL_SPECS$decade$incr$($d$$){return $d$$.setFullYear($d$$.getFullYear()+10)}},year:{span:1728E7,start:function $$Morris$$$LABEL_SPECS$year$start$($d$$){return new Date($d$$.getFullYear(),0,1)},fmt:function $$Morris$$$LABEL_SPECS$year$fmt$($d$$){return""+
$d$$.getFullYear()},incr:function $$Morris$$$LABEL_SPECS$year$incr$($d$$){return $d$$.setFullYear($d$$.getFullYear()+1)}},month:{span:24192E5,start:function $$Morris$$$LABEL_SPECS$month$start$($d$$){return new Date($d$$.getFullYear(),$d$$.getMonth(),1)},fmt:function $$Morris$$$LABEL_SPECS$month$fmt$($d$$){return""+$d$$.getFullYear()+"-"+$Morris$$.pad2($d$$.getMonth()+1)},incr:function $$Morris$$$LABEL_SPECS$month$incr$($d$$){return $d$$.setMonth($d$$.getMonth()+1)}},day:{span:864E5,start:function $$Morris$$$LABEL_SPECS$day$start$($d$$){return new Date($d$$.getFullYear(),
$d$$.getMonth(),$d$$.getDate())},fmt:function $$Morris$$$LABEL_SPECS$day$fmt$($d$$){return""+$d$$.getFullYear()+"-"+$Morris$$.pad2($d$$.getMonth()+1)+"-"+$Morris$$.pad2($d$$.getDate())},incr:function $$Morris$$$LABEL_SPECS$day$incr$($d$$){return $d$$.setDate($d$$.getDate()+1)}},hour:$minutesSpecHelper$$(60),"30min":$minutesSpecHelper$$(30),"15min":$minutesSpecHelper$$(15),"10min":$minutesSpecHelper$$(10),"5min":$minutesSpecHelper$$(5),minute:$minutesSpecHelper$$(1),"30sec":$secondsSpecHelper$$(30),
"15sec":$secondsSpecHelper$$(15),"10sec":$secondsSpecHelper$$(10),"5sec":$secondsSpecHelper$$(5),second:$secondsSpecHelper$$(1)};$Morris$$.AUTO_LABEL_ORDER="decade year month day hour 30min 15min 10min 5min minute 30sec 15sec 10sec 5sec second".split(" ");$Morris$$.Area=function($_super$$){function $Area$$($options$$){if(!(this instanceof $Morris$$.Area))return new $Morris$$.Area($options$$);this.cumulative=!0;$Area$$.__super__.constructor.call(this,$options$$)}$__extends$$($Area$$,$_super$$);$Area$$.prototype.calcPoints=
function $$Area$$$$calcPoints$(){var $row$$,$total$$,$y$$,$_i$$,$_len$$,$_ref$$,$_results$$;$_ref$$=this.data;$_results$$=[];$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$_i$$++){$row$$=$_ref$$[$_i$$];$row$$._x=this.transX($row$$.x);$total$$=0;for(var $JSCompiler_temp_const$$=$row$$,$_j$$=void 0,$_len1$$=void 0,$_ref1$$=void 0,$_results1$$=void 0,$_ref1$$=$row$$.y,$_results1$$=[],$_j$$=0,$_len1$$=$_ref1$$.length;$_j$$<$_len1$$;$_j$$++)$y$$=$_ref1$$[$_j$$],$total$$+=$y$$||0,$_results1$$.push(this.transY($total$$));
$JSCompiler_temp_const$$._y=$_results1$$;$_results$$.push($row$$._ymax=$row$$._y[$row$$._y.length-1])}return $_results$$};$Area$$.prototype.drawSeries=function $$Area$$$$drawSeries$(){var $i$$,$path$$,$_i$$,$_ref$$;for($i$$=$_i$$=$_ref$$=this.options.ykeys.length-1;0>=$_ref$$?0>=$_i$$:0<=$_i$$;$i$$=0>=$_ref$$?++$_i$$:--$_i$$)$path$$=this.paths[$i$$],null!==$path$$&&($path$$+="L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath($path$$,this.fillForSeries($i$$)));
return $Area$$.__super__.drawSeries.call(this)};$Area$$.prototype.fillForSeries=function $$Area$$$$fillForSeries$($color$$2_i$$){$color$$2_i$$=Raphael.rgb2hsl(this.colorFor(this.data[$color$$2_i$$],$color$$2_i$$,"line"));return Raphael.hsl($color$$2_i$$.h,Math.min(255,0.75*$color$$2_i$$.s),Math.min(255,1.25*$color$$2_i$$.l))};$Area$$.prototype.drawFilledPath=function $$Area$$$$drawFilledPath$($path$$,$fill$$){return this.raphael.path($path$$).attr("fill",$fill$$).attr("stroke-width",0)};return $Area$$}($Morris$$.Line);
$Morris$$.Bar=function($_super$$){function $Bar$$($options$$){this.onHoverOut=$__bind$$(this.onHoverOut,this);this.onHoverMove=$__bind$$(this.onHoverMove,this);if(!(this instanceof $Morris$$.Bar))return new $Morris$$.Bar($options$$);$Bar$$.__super__.constructor.call(this,$$$$.extend({},$options$$,{parseTime:!1}))}$__extends$$($Bar$$,$_super$$);$Bar$$.prototype.init=function $$Bar$$$$init$(){this.cumulative=this.options.stacked;if("always"!==this.options.hideHover)return this.hover=new $Morris$$.Hover({parent:this.el}),
this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut)};$Bar$$.prototype.defaults={barSizeRatio:0.75,barGap:3,barColors:"#0b62a4 #7a92a3 #4da74d #afd8f8 #edc240 #cb4b4b #9440ed".split(" "),xLabelMargin:50};$Bar$$.prototype.calc=function $$Bar$$$$calc$(){var $_ref$$;this.calcBars();if(!1===this.options.hideHover)return($_ref$$=this.hover).update.apply($_ref$$,this.hoverContentForRow(this.data.length-1))};$Bar$$.prototype.calcBars=function $$Bar$$$$calcBars$(){var $idx$$,$row$$,$y$$,
$_i$$,$_len$$,$_ref$$,$_results$$;$_ref$$=this.data;$_results$$=[];$idx$$=$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$idx$$=++$_i$$)$row$$=$_ref$$[$idx$$],$row$$._x=this.left+this.width*($idx$$+0.5)/this.data.length,$_results$$.push($row$$._y=function(){var $_j$$,$_len1$$,$_ref1$$,$_results1$$;$_ref1$$=$row$$.y;$_results1$$=[];$_j$$=0;for($_len1$$=$_ref1$$.length;$_j$$<$_len1$$;$_j$$++)$y$$=$_ref1$$[$_j$$],null!=$y$$?$_results1$$.push(this.transY($y$$)):$_results1$$.push(null);return $_results1$$}.call(this));
return $_results$$};$Bar$$.prototype.draw=function $$Bar$$$$draw$(){this.options.axes&&this.drawXAxis();return this.drawSeries()};$Bar$$.prototype.drawXAxis=function $$Bar$$$$drawXAxis$(){var $i$$12_label$$5_row$$,$labelBox$$,$prevLabelMargin$$,$ypos$$,$_i$$,$_ref$$,$_results$$;$ypos$$=this.bottom+1.25*this.options.gridTextSize;$prevLabelMargin$$=null;$_results$$=[];$i$$12_label$$5_row$$=$_i$$=0;for($_ref$$=this.data.length;0<=$_ref$$?$_i$$<$_ref$$:$_i$$>$_ref$$;$i$$12_label$$5_row$$=0<=$_ref$$?++$_i$$:
--$_i$$)$i$$12_label$$5_row$$=this.data[this.data.length-1-$i$$12_label$$5_row$$],$i$$12_label$$5_row$$=this.drawXAxisLabel($i$$12_label$$5_row$$._x,$ypos$$,$i$$12_label$$5_row$$.label),$labelBox$$=$i$$12_label$$5_row$$.getBBox(),(null==$prevLabelMargin$$||$prevLabelMargin$$>=$labelBox$$.x+$labelBox$$.width)&&0<=$labelBox$$.x&&$labelBox$$.x+$labelBox$$.width<this.el.width()?$_results$$.push($prevLabelMargin$$=$labelBox$$.x-this.options.xLabelMargin):$_results$$.push($i$$12_label$$5_row$$.remove());
return $_results$$};$Bar$$.prototype.drawSeries=function $$Bar$$$$drawSeries$(){var $barWidth$$,$bottom$$,$groupWidth$$,$idx$$,$lastTop$$,$left$$,$leftPadding$$,$numBars$$,$row$$,$sidx$$,$size$$,$top$$,$ypos$$,$zeroPos$$;$groupWidth$$=this.width/this.options.data.length;$numBars$$=null!=this.options.stacked?1:this.options.ykeys.length;$barWidth$$=($groupWidth$$*this.options.barSizeRatio-this.options.barGap*($numBars$$-1))/$numBars$$;$leftPadding$$=$groupWidth$$*(1-this.options.barSizeRatio)/2;$zeroPos$$=
0>=this.ymin&&0<=this.ymax?this.transY(0):null;return this.bars=function(){var $_i$$,$_len$$,$_ref$$,$_results$$;$_ref$$=this.data;$_results$$=[];$idx$$=$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$idx$$=++$_i$$)$row$$=$_ref$$[$idx$$],$lastTop$$=0,$_results$$.push(function(){var $_j$$,$_len1$$,$_ref1$$,$_results1$$;$_ref1$$=$row$$._y;$_results1$$=[];$sidx$$=$_j$$=0;for($_len1$$=$_ref1$$.length;$_j$$<$_len1$$;$sidx$$=++$_j$$)$ypos$$=$_ref1$$[$sidx$$],null!==$ypos$$?($zeroPos$$?($top$$=Math.min($ypos$$,
$zeroPos$$),$bottom$$=Math.max($ypos$$,$zeroPos$$)):($top$$=$ypos$$,$bottom$$=this.bottom),$left$$=this.left+$idx$$*$groupWidth$$+$leftPadding$$,this.options.stacked||($left$$+=$sidx$$*($barWidth$$+this.options.barGap)),$size$$=$bottom$$-$top$$,this.options.stacked&&($top$$-=$lastTop$$),this.drawBar($left$$,$top$$,$barWidth$$,$size$$,this.colorFor($row$$,$sidx$$,"bar")),$_results1$$.push($lastTop$$+=$size$$)):$_results1$$.push(null);return $_results1$$}.call(this));return $_results$$}.call(this)};
$Bar$$.prototype.colorFor=function $$Bar$$$$colorFor$($r$$3_row$$,$s$$3_sidx$$,$type$$){return"function"===typeof this.options.barColors?($r$$3_row$$={x:$r$$3_row$$.x,y:$r$$3_row$$.y[$s$$3_sidx$$],label:$r$$3_row$$.label},$s$$3_sidx$$={index:$s$$3_sidx$$,key:this.options.ykeys[$s$$3_sidx$$],label:this.options.labels[$s$$3_sidx$$]},this.options.barColors.call(this,$r$$3_row$$,$s$$3_sidx$$,$type$$)):this.options.barColors[$s$$3_sidx$$%this.options.barColors.length]};$Bar$$.prototype.hitTest=function $$Bar$$$$hitTest$($x$$,
$y$$){if(0===this.data.length)return null;$x$$=Math.max(Math.min($x$$,this.right),this.left);return Math.min(this.data.length-1,Math.floor(($x$$-this.left)/(this.width/this.data.length)))};$Bar$$.prototype.onHoverMove=function $$Bar$$$$onHoverMove$($x$$,$y$$){var $index$$,$_ref$$;$index$$=this.hitTest($x$$,$y$$);return($_ref$$=this.hover).update.apply($_ref$$,this.hoverContentForRow($index$$))};$Bar$$.prototype.onHoverOut=function $$Bar$$$$onHoverOut$(){if("auto"===this.options.hideHover)return this.hover.hide()};
$Bar$$.prototype.hoverContentForRow=function $$Bar$$$$hoverContentForRow$($index$$){var $content$$,$j$$,$row$$,$y$$,$_i$$,$_len$$,$_ref$$;if("function"===typeof this.options.hoverCallback)$content$$=this.options.hoverCallback($index$$,this.options);else{$row$$=this.data[$index$$];$content$$="<div class='morris-hover-row-label'>"+$row$$.label+"</div>";$_ref$$=$row$$.y;$j$$=$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$j$$=++$_i$$)$y$$=$_ref$$[$j$$],$content$$+="<div class='morris-hover-point'> <span class='label-1'><strong class='language' style='background-color: "+
this.colorFor($row$$,$j$$,"label")+"'>\n "+this.options.labels[$j$$]+":\n </strong></span><span> "+this.yLabelFormat($y$$)+"\n</span></div>"}return[$content$$,this.left+($index$$+0.5)*this.width/this.data.length]};$Bar$$.prototype.drawXAxisLabel=function $$Bar$$$$drawXAxisLabel$($xPos$$,$yPos$$,$text$$){return this.raphael.text($xPos$$,$yPos$$,$text$$).attr("font-size",this.options.gridTextSize).attr("fill",this.options.gridTextColor)};$Bar$$.prototype.drawBar=function $$Bar$$$$drawBar$($xPos$$,$yPos$$,
$width$$,$height$$,$barColor$$){return this.raphael.rect($xPos$$,$yPos$$,$width$$,$height$$).attr("fill",$barColor$$).attr("stroke-width",0)};return $Bar$$}($Morris$$.Grid);$Morris$$.Donut=function(){function $Donut$$($options$$){this.select=$__bind$$(this.select,this);if(!(this instanceof $Morris$$.Donut))return new $Morris$$.Donut($options$$);this.el="string"===typeof $options$$.element?$$$$(document.getElementById($options$$.element)):$$$$($options$$.element);this.options=$$$$.extend({},this.defaults,
$options$$);if(null===this.el||0===this.el.length)throw Error("Graph placeholder not found.");void 0===$options$$.data||0===$options$$.data.length||(this.data=$options$$.data,this.redraw())}$Donut$$.prototype.defaults={colors:"#0B62A4 #3980B5 #679DC6 #95BBD7 #B0CCE1 #095791 #095085 #083E67 #052C48 #042135".split(" "),backgroundColor:"#FFFFFF",labelColor:"#000000",valueColor:"#000000",formatter:$Morris$$.commas};$Donut$$.prototype.redraw=function $$Donut$$$$redraw$(){var $C__i$$23__results$$,$cx_max_value$$,
$_k$$0$$,$d$$,$idx$$3_x$$,$last_seg$$,$_len$$,$_ref$$,$_len2_total$$,$_ref2$$2_w$$,$_j$$,$_len1$$,$_ref1$$;this.el.empty();this.raphael=new Raphael(this.el[0]);$cx_max_value$$=this.el.width()/2;$_k$$0$$=this.el.height()/2;$_ref2$$2_w$$=(Math.min($cx_max_value$$,$_k$$0$$)-10)/3;$_len2_total$$=0;$_ref$$=this.data;$C__i$$23__results$$=0;for($_len$$=$_ref$$.length;$C__i$$23__results$$<$_len$$;$C__i$$23__results$$++)$idx$$3_x$$=$_ref$$[$C__i$$23__results$$],$_len2_total$$+=$idx$$3_x$$.value;$_len$$=5/
(2*$_ref2$$2_w$$);$C__i$$23__results$$=1.9999*Math.PI-$_len$$*this.data.length;$idx$$3_x$$=$last_seg$$=0;this.segments=[];$_ref1$$=this.data;$_j$$=0;for($_len1$$=$_ref1$$.length;$_j$$<$_len1$$;$_j$$++)$d$$=$_ref1$$[$_j$$],$_ref$$=$last_seg$$+$_len$$+$C__i$$23__results$$*($d$$.value/$_len2_total$$),$last_seg$$=new $Morris$$.DonutSegment($cx_max_value$$,$_k$$0$$,2*$_ref2$$2_w$$,$_ref2$$2_w$$,$last_seg$$,$_ref$$,this.options.colors[$idx$$3_x$$%this.options.colors.length],this.options.backgroundColor,
$d$$,this.raphael),$last_seg$$.render(),this.segments.push($last_seg$$),$last_seg$$.on("hover",this.select),$last_seg$$=$_ref$$,$idx$$3_x$$+=1;this.text1=this.drawEmptyDonutLabel($cx_max_value$$,$_k$$0$$-10,this.options.labelColor,15,800);this.text2=this.drawEmptyDonutLabel($cx_max_value$$,$_k$$0$$+10,this.options.valueColor,14,800);$cx_max_value$$=Math.max.apply(null,function(){var $_k$$,$_len2$$,$_ref2$$,$_results$$;$_ref2$$=this.data;$_results$$=[];$_k$$=0;for($_len2$$=$_ref2$$.length;$_k$$<$_len2$$;$_k$$++)$d$$=
$_ref2$$[$_k$$],$_results$$.push($d$$.value);return $_results$$}.call(this));$idx$$3_x$$=0;$_ref2$$2_w$$=this.data;$C__i$$23__results$$=[];$_k$$0$$=0;for($_len2_total$$=$_ref2$$2_w$$.length;$_k$$0$$<$_len2_total$$;$_k$$0$$++){$d$$=$_ref2$$2_w$$[$_k$$0$$];if($d$$.value===$cx_max_value$$){this.select($idx$$3_x$$);break}$C__i$$23__results$$.push($idx$$3_x$$+=1)}return $C__i$$23__results$$};$Donut$$.prototype.select=function $$Donut$$$$select$($idx$$){var $s$$,$_i$$,$_len$$,$_ref$$;$_ref$$=this.segments;
$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$_i$$++)$s$$=$_ref$$[$_i$$],$s$$.deselect();$idx$$="number"===typeof $idx$$?this.segments[$idx$$]:$idx$$;$idx$$.select();return this.setLabels($idx$$.data.label,this.options.formatter($idx$$.data.value,$idx$$.data))};$Donut$$.prototype.setLabels=function $$Donut$$$$setLabels$($label1$$,$label2$$){var $inner_maxHeightBottom$$,$maxHeightTop_text1scale_text2bbox$$,$maxWidth_text2scale$$,$text1bbox$$;$inner_maxHeightBottom$$=2*(Math.min(this.el.width()/
2,this.el.height()/2)-10)/3;$maxWidth_text2scale$$=1.8*$inner_maxHeightBottom$$;$maxHeightTop_text1scale_text2bbox$$=$inner_maxHeightBottom$$/2;$inner_maxHeightBottom$$/=3;this.text1.attr({text:$label1$$,transform:""});$text1bbox$$=this.text1.getBBox();$maxHeightTop_text1scale_text2bbox$$=Math.min($maxWidth_text2scale$$/$text1bbox$$.width,$maxHeightTop_text1scale_text2bbox$$/$text1bbox$$.height);this.text1.attr({transform:"S"+$maxHeightTop_text1scale_text2bbox$$+","+$maxHeightTop_text1scale_text2bbox$$+
","+($text1bbox$$.x+$text1bbox$$.width/2)+","+($text1bbox$$.y+$text1bbox$$.height)});this.text2.attr({text:$label2$$,transform:""});$maxHeightTop_text1scale_text2bbox$$=this.text2.getBBox();$maxWidth_text2scale$$=Math.min($maxWidth_text2scale$$/$maxHeightTop_text1scale_text2bbox$$.width,$inner_maxHeightBottom$$/$maxHeightTop_text1scale_text2bbox$$.height);return this.text2.attr({transform:"S"+$maxWidth_text2scale$$+","+$maxWidth_text2scale$$+","+($maxHeightTop_text1scale_text2bbox$$.x+$maxHeightTop_text1scale_text2bbox$$.width/
2)+","+$maxHeightTop_text1scale_text2bbox$$.y})};$Donut$$.prototype.drawEmptyDonutLabel=function $$Donut$$$$drawEmptyDonutLabel$($text$$11_xPos$$,$yPos$$,$color$$,$fontSize$$,$fontWeight$$){$text$$11_xPos$$=this.raphael.text($text$$11_xPos$$,$yPos$$,"").attr("font-size",$fontSize$$).attr("fill",$color$$);null!=$fontWeight$$&&$text$$11_xPos$$.attr("font-weight",$fontWeight$$);return $text$$11_xPos$$};return $Donut$$}();$Morris$$.DonutSegment=function($_super$$){function $DonutSegment$$($cx$$,$cy$$,
$inner$$,$outer$$,$p0$$,$p1$$,$color$$,$backgroundColor$$,$data$$,$raphael$$){this.cx=$cx$$;this.cy=$cy$$;this.inner=$inner$$;this.outer=$outer$$;this.color=$color$$;this.backgroundColor=$backgroundColor$$;this.data=$data$$;this.raphael=$raphael$$;this.deselect=$__bind$$(this.deselect,this);this.select=$__bind$$(this.select,this);this.sin_p0=Math.sin($p0$$);this.cos_p0=Math.cos($p0$$);this.sin_p1=Math.sin($p1$$);this.cos_p1=Math.cos($p1$$);this.is_long=$p1$$-$p0$$>Math.PI?1:0;this.path=this.calcSegment(this.inner+
3,this.inner+this.outer-5);this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer);this.hilight=this.calcArc(this.inner)}$__extends$$($DonutSegment$$,$_super$$);$DonutSegment$$.prototype.calcArcPoints=function $$DonutSegment$$$$calcArcPoints$($r$$){return[this.cx+$r$$*this.sin_p0,this.cy+$r$$*this.cos_p0,this.cx+$r$$*this.sin_p1,this.cy+$r$$*this.cos_p1]};$DonutSegment$$.prototype.calcSegment=function $$DonutSegment$$$$calcSegment$($r1$$,$r2$$){var $ix0$$,$ix1$$,$iy0$$,$_ref$$,$_ref1$$;
$_ref$$=this.calcArcPoints($r1$$);$ix0$$=$_ref$$[0];$iy0$$=$_ref$$[1];$ix1$$=$_ref$$[2];$_ref$$=$_ref$$[3];$_ref1$$=this.calcArcPoints($r2$$);return"M"+$ix0$$+","+$iy0$$+("A"+$r1$$+","+$r1$$+",0,"+this.is_long+",0,"+$ix1$$+","+$_ref$$)+("L"+$_ref1$$[2]+","+$_ref1$$[3])+("A"+$r2$$+","+$r2$$+",0,"+this.is_long+",1,"+$_ref1$$[0]+","+$_ref1$$[1])+"Z"};$DonutSegment$$.prototype.calcArc=function $$DonutSegment$$$$calcArc$($r$$){var $_ref$$;$_ref$$=this.calcArcPoints($r$$);return"M"+$_ref$$[0]+","+$_ref$$[1]+
("A"+$r$$+","+$r$$+",0,"+this.is_long+",0,"+$_ref$$[2]+","+$_ref$$[3])};$DonutSegment$$.prototype.render=function $$DonutSegment$$$$render$(){var $_this$$=this;this.arc=this.drawDonutArc(this.hilight,this.color);return this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return $_this$$.fire("hover",$_this$$)})};$DonutSegment$$.prototype.drawDonutArc=function $$DonutSegment$$$$drawDonutArc$($path$$,$color$$){return this.raphael.path($path$$).attr({stroke:$color$$,"stroke-width":2,
opacity:0})};$DonutSegment$$.prototype.drawDonutSegment=function $$DonutSegment$$$$drawDonutSegment$($path$$,$fillColor$$,$strokeColor$$,$hoverFunction$$){return this.raphael.path($path$$).attr({fill:$fillColor$$,stroke:$strokeColor$$,"stroke-width":3}).hover($hoverFunction$$)};$DonutSegment$$.prototype.select=function $$DonutSegment$$$$select$(){if(!this.selected)return this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0};$DonutSegment$$.prototype.deselect=
function $$DonutSegment$$$$deselect$(){if(this.selected)return this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1};return $DonutSegment$$}($Morris$$.EventEmitter)}).call(this);
(function(){var $cache$$={};this.tmpl=function tmpl($str$$,$data$$){var $fn$$=!/\W/.test($str$$)?$cache$$[$str$$]=$cache$$[$str$$]||tmpl(document.getElementById($str$$).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+$str$$.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return $data$$?
$fn$$($data$$):$fn$$}})();jQuery.extend(jQuery.ns("Kattis.API"),{ajax_session_edit:"/ajax/session",ajax_session_banner:"/ajax/session/banner",ajax_session_judge:"/ajax/session/judge",ajax_session_problem:"/ajax/session/problem",ajax_session_team:"/ajax/session/team",ajax_session_team_member:"/ajax/session/team/member",ajax_session_short_name_available:"/ajax/session/short-name-available",ajax_session_publish:"/ajax/session/publish",ajax_author:"/ajax/author",ajax_course_offering_teacher:"/ajax/course_offering/teacher",ajax_course_offering_short_name_available:"/ajax/course_offering/short-name-available",
user_view:"/users",problemgroup_edit:"/problemgroups/{0}/edit"});jQuery.extend(jQuery.ns("Kattis.util"),{isValidDate:function($value$$38_year$$){var $day_matches$$=$value$$38_year$$.match(/^(\d\d\d\d)-(\d\d)-(\d\d)$/);if(null===$day_matches$$)return!1;$value$$38_year$$=parseInt($day_matches$$[1]);var $month$$=parseInt($day_matches$$[2]),$day_matches$$=parseInt($day_matches$$[3]);if(1970>$value$$38_year$$||2100<$value$$38_year$$||0==$month$$||12<$month$$)return!1;var $monthLength$$=[31,28,31,30,31,30,31,31,30,31,30,31];if(0==$value$$38_year$$%400||0!=$value$$38_year$$%
100&&0==$value$$38_year$$%4)$monthLength$$[1]=29;return 0<$day_matches$$&&$day_matches$$<=$monthLength$$[$month$$-1]},isValidTime:function($hours_value$$){var $matches$$=$hours_value$$.match(/^(\d\d):(\d\d)(:(\d\d))?$/);if(null===$matches$$)return!1;$hours_value$$=parseInt($matches$$[1]);var $minutes$$=parseInt($matches$$[2]),$matches$$=void 0===$matches$$[4]?null:parseInt($matches$$[4]);return 24>$hours_value$$&&60>$minutes$$&&(null===$matches$$||60>$matches$$)}});jQuery.extend(jQuery.ns("Kattis.views.contest.edit"),{MAX_INT_32:Math.pow(2,31)-1,MAX_UNPRIVILEGED_DURATION:604800,init:function(){this.shortnameValid=this.timehintsValid=!0;this.btnCreateSession=jQuery("#create-btn");this.btnCreateSession.bind("click",this.createSession.bind(this));this.txtStartTime=jQuery("#start-time");this.spanStartHint=jQuery("#start-hint");this.startTimeVal=null;this.txtStartTime.bind("change keyup input",this.modifyTimeHints.bind(this));this.txtDuration=jQuery("#duration");
this.spanFinishHint=jQuery("#finish-hint");this.durationVal=null;this.txtDuration.bind("change keyup input",this.modifyTimeHints.bind(this));this.sessionNameHint=jQuery("#session-name-hint");(this.sessionNameValid=this.data.existing)||this.sessionNameHint.text("Name can't be empty");jQuery("#session-name").on("change keyup input",this.modifySessionNameHint.bind(this));this.data.is_privileged&&(this.txtCutoff=jQuery("#cutoff"),this.spanCutoffHint=jQuery("#cutoff-hint"),this.cutoffVal=null,this.txtCutoff.bind("change keyup input",
this.modifyTimeHints.bind(this)),this.txtShortName=jQuery("#short-name"),this.spanShortNameHint=jQuery("#short-name-hint"),this.txtShortName.bind("change keyup input",this.onContestShortNameChange.bind(this)),jQuery("#remove-banner").bind("click",this.onRemoveBannerClick.bind(this)));if(this.data.existing){this.btnPublishSession=jQuery("#publish-btn");this.spanPublishProgress=jQuery("#publish-progress");this.btnPublishSession.bind("click",this.publishSession.bind(this));jQuery("#basic-settings").on("change input",
":input",this.onBasicSettingChange.bind(this));jQuery("#tblProblems").on("mousedown mouseup",".dndhandle",function(){jQuery(this).toggleClass("grab grabbing")});jQuery("#add-problem-btn").bind("click",this.onAddProblem.bind(this));jQuery("#add-problem-name, #add-problem-available-from, #add-problem-color-name, #add-problem-color-rgb").bind("change keyup input",this.onProblemNameAvalabilityChange.bind(this));jQuery("#add-problem-name, #add-problem-available-from, #add-problem-color-name, #add-problem-color-rgb").keypress(function($e$$){13==
$e$$.keyCode&&!jQuery("#add-problem-btn").prop("disabled")&&jQuery("#add-problem-btn").click()});this.resetProblems();this.setUpProblemsSorting();this.data.is_privileged&&(this.tbodyJudge=jQuery("#tblJudges tbody"),this.judge_tmpl=tmpl("judge_tmpl"),jQuery("#add-judge-btn").bind("click",this.onAddJudge.bind(this)),jQuery("#add-judge-username").bind("change keyup input",function(){jQuery("#add-judge-btn").prop("disabled",""===jQuery(this).val())}),jQuery("#add-judge-username").keypress(function($e$$){13==
$e$$.keyCode&&!jQuery("#add-judge-btn").prop("disabled")&&jQuery("#add-judge-btn").click()}),this.data.judges.forEach(this.addJudgeRow,this));this.tbodyTeam=jQuery("#tblTeams tbody");this.team_tmpl=tmpl("team_tmpl");this.team_member_tmpl=tmpl("team_member_tmpl");this.autoaccept=!1;this.tbodyTeam.on("click","input.team-member-accepted",function($event$$){this.autoaccept=jQuery($event$$.target).is(":checked");this.tbodyTeam.find("input.team-member-accepted").prop("checked",this.autoaccept)}.bind(this));
jQuery("#add-team-btn").bind("click",this.onAddTeam.bind(this));jQuery("#add-team-name"+(this.data.is_privileged?", #add-team-penalty":"")).keyup(function($e$$){13==$e$$.keyCode&&!jQuery("#add-team-btn").prop("disabled")&&jQuery("#add-team-btn").click()});jQuery(document).on("focusin",function($e$$){var $focusedElement$$=$e$$.target;jQuery("#tblTeams tbody tr").has(".team-edit:hidden").each(function(){jQuery(this).has($focusedElement$$).length||jQuery(this).find(".team-done").click()})});this.data.teams.forEach(this.addTeamRow,
this);var $me$$=this,$availableFrom$$=jQuery("#add-problem-available-from");jQuery(".enable-add-problem-popover").popover({placement:"top",html:!0,container:"body",content:'<input type="text" class="form-control problem-available-date">'}).on("show.bs.popover",function(){$availableFrom$$.prop("disabled",!0)}).on("hide.bs.popover",function(){$availableFrom$$.prop("disabled",!1)}).on("shown.bs.popover",function(){var $startTime$$=$me$$.getTimeFromString($me$$.startTimeVal),$availableFromVal_hours$$=
$availableFrom$$.val().split(":"),$availableFromTime_minutes$$=$availableFromVal_hours$$[1],$availableFromVal_hours$$=$availableFromVal_hours$$[0],$dateInput$$=jQuery(".problem-available-date");null!==$startTime$$&&($availableFromTime_minutes$$=new Date($startTime$$.getTime()+6E4*$availableFromTime_minutes$$+36E5*$availableFromVal_hours$$),$dateInput$$.val($me$$.getTimeStringFromDateObject($availableFromTime_minutes$$)));$dateInput$$.on("change keyup paste",function(){if(null!==$startTime$$){var $diff_inputTime$$=
$me$$.getTimeFromString($dateInput$$.val());null!==$diff_inputTime$$&&($diff_inputTime$$-=$startTime$$,0<=$diff_inputTime$$&&$availableFrom$$.val(parseInt($diff_inputTime$$/36E5)+":"+$me$$.leftBinPad(parseInt($diff_inputTime$$/6E4)%60)))}})})}this.modifyTimeHints();jQuery("body").on("hidden.bs.popover",function($e$$){jQuery($e$$.target).data("bs.popover").inState.click=!1})},leftBinPad:function($number$$){return 10>$number$$?"0"+$number$$:$number$$},getTimeStringFromDateObject:function($d$$){var $pad$$=
this.leftBinPad;return $d$$.getUTCFullYear()+"-"+$pad$$($d$$.getUTCMonth()+1)+"-"+$pad$$($d$$.getUTCDate())+" "+$pad$$($d$$.getUTCHours())+":"+$pad$$($d$$.getUTCMinutes())+":"+$pad$$($d$$.getUTCSeconds())},modifySessionNameHint:function($event$$){""===jQuery($event$$.target).val().trim()?(this.sessionNameHint.text("Name can't be empty"),this.sessionNameValid=!1):(this.sessionNameHint.text(""),this.sessionNameValid=!0);this.updateSaveButton()},isValid:function(){return this.timehintsValid&&this.shortnameValid&&
this.sessionNameValid},updateSaveButton:function($isValid$$){$isValid$$=void 0===$isValid$$?this.isValid():$isValid$$;this.btnCreateSession.prop("disabled",!$isValid$$);this.data.existing&&($isValid$$?jQuery("#unsaved-changes").removeClass("hidden"):jQuery("#unsaved-changes").addClass("hidden"))},onBasicSettingChange:function($event$$){jQuery($event$$.target).closest("div.form-group").addClass("has-warning");this.updateSaveButton()},onProblemNameAvalabilityChange:function(){var $valid$$=!0;""===jQuery("#add-problem-name").val()&&
($valid$$=!1);this.data.is_privileged&&null===this.parse_formatted_interval(jQuery("#add-problem-available-from").val())&&($valid$$=!1);jQuery("#add-problem-btn").prop("disabled",!$valid$$)},setUpProblemsSorting:function(){jQuery("#tblProblems tbody").sortable({handle:"> .dndhandle",items:"> tr",helper:function($e$$,$ui$$){$ui$$.parent().children().children().each(function(){jQuery(this).width(jQuery(this).width())});return $ui$$},update:function($e$$,$ui$$){var $parameters$$={short_name:this.data.short_name,
problem_name:$ui$$.item.attr("data-name"),index:$ui$$.item.index(),csrf_token:this.data.csrf_token};jQuery.ajax({type:"PUT",url:Kattis.API.ajax_session_problem,contentType:"application/json",data:JSON.stringify($parameters$$),context:this}).done(function($resp$$){this.replaceProblems($resp$$.response.problems)}).fail(function($jqXHR$$){var $base_msg$$=$ui$$.item.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code);this.resetProblems()})}.bind(this)})},onContestShortNameChange:function(){this.call_id=
(this.call_id||0)+1;this.hintTimeout&&(clearTimeout(this.hintTimeout),this.hintTimeout=null);this.data.short_name===this.txtShortName.val()?(this.spanShortNameHint.removeClass("glyphicon glyphicon-ok text-success glyphicon glyphicon-remove text-danger fa fa-spinner fa-spin").addClass("glyphicon glyphicon-ok text-success"),this.data.existing&&this.btnPublishSession.prop("disabled",!1),this.shortnameValid=!0,this.updateSaveButton()):""===this.txtShortName.val()?(this.spanShortNameHint.removeClass("glyphicon glyphicon-ok text-success glyphicon glyphicon-remove text-danger fa fa-spinner fa-spin"),
this.shortnameValid=!0,this.updateSaveButton()):(this.spanShortNameHint.removeClass("glyphicon glyphicon-ok text-success glyphicon glyphicon-remove text-danger fa fa-spinner fa-spin").addClass("fa fa-spinner fa-spin"),this.updateSaveButton(!1),this.data.existing&&this.btnPublishSession.prop("disabled",!0),this.hintTimeout=setTimeout(function($call_id$$){jQuery.ajax({type:"GET",url:Kattis.API.ajax_session_short_name_available,data:{name:this.txtShortName.val()},context:this}).always(function(){this.spanShortNameHint.removeClass("glyphicon glyphicon-ok text-success glyphicon glyphicon-remove text-danger fa fa-spinner fa-spin")}).done(function($result$$){$call_id$$===
this.call_id&&(this.shortnameValid=$result$$.response.available,this.spanShortNameHint.addClass(this.shortnameValid?"glyphicon glyphicon-ok text-success":"glyphicon glyphicon-remove text-danger"),this.updateSaveButton())}).fail(function(){$call_id$$===this.call_id&&(this.shortnameValid=!1,this.spanShortNameHint.addClass("glyphicon glyphicon-remove text-danger"),this.updateSaveButton())})}.bind(this),750,this.call_id))},problem_tmpl:function($data$$){var $tpl$$=tmpl("problem_tmpl");$data$$.format_minutes=
this.format_minutes;return $tpl$$($data$$)},onAddProblem:function($event$$7_parameters$$){var $addProblemBtn$$=jQuery($event$$7_parameters$$.target);jQuery("#add-problem-btn, #add-problem-name, #add-problem-available-from, #add-problem-color-name, #add-problem-color-rgb").prop("disabled",!0);$event$$7_parameters$$={short_name:this.data.short_name,problem_name:jQuery("#add-problem-name").val(),color_name:jQuery("#add-problem-color-name").val(),rgb:jQuery("#add-problem-color-rgb").val(),csrf_token:this.data.csrf_token};
this.data.is_privileged&&($event$$7_parameters$$.available_in_session_from=this.parse_formatted_interval(jQuery("#add-problem-available-from").val()));jQuery.ajax({type:"POST",url:Kattis.API.ajax_session_problem,contentType:"application/json",data:JSON.stringify($event$$7_parameters$$),context:this}).always(function(){jQuery("#add-problem-name, #add-problem-available-from, #add-problem-color-name, #add-problem-color-rgb").prop("disabled",!1);jQuery("#add-problem-name").focus();jQuery(".enable-add-problem-popover").popover("hide")}).done(function($resp$$){jQuery("#add-problem-name").val("");
jQuery("#add-problem-available-from").val("0:00");jQuery("#add-problem-color-name").val("");jQuery("#add-problem-color-rgb").val("");this.replaceProblems($resp$$.response.problems)}).fail(function($jqXHR$$){$addProblemBtn$$.prop("disabled",!1);var $base_msg$$=$addProblemBtn$$.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)})},onAddJudge:function($event$$){var $addJudgeBtn$$=jQuery($event$$.target);0<this.tbodyJudge.find("[data-username='"+jQuery("#add-judge-username").val()+
"']").length?alert($addJudgeBtn$$.attr("data-nonunique-msg")):($addJudgeBtn$$.prop("disabled",!0),$event$$={short_name:this.data.short_name,username:jQuery("#add-judge-username").val(),may_clarify:jQuery("#add-judge-may-clarify").is(":checked"),csrf_token:this.data.csrf_token},jQuery.ajax({type:"POST",url:Kattis.API.ajax_session_judge,contentType:"application/json",data:JSON.stringify($event$$),context:this}).always(function(){jQuery("#add-judge-username").focus()}).done(function($resp$$){jQuery("#add-judge-username").val("");
jQuery("#add-judge-may-clarify").prop("checked",!0);this.addJudgeRow($resp$$.response,!0)}).fail(function($jqXHR$$){$addJudgeBtn$$.prop("disabled",!1);var $base_msg$$=$addJudgeBtn$$.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)}))},onAddTeam:function($event$$9_params$$){var $addTeamBtn$$=jQuery($event$$9_params$$.target),$inputs$$=$addTeamBtn$$.closest("tr").find(":input");$inputs$$.prop("disabled",!0);$event$$9_params$$={short_name:this.data.short_name,
team_name:jQuery("#add-team-name").val(),csrf_token:this.data.csrf_token};this.data.is_privileged&&($event$$9_params$$.penalty_adjustment=jQuery("#add-team-penalty").val());jQuery.ajax({type:"POST",url:Kattis.API.ajax_session_team,contentType:"application/json",data:JSON.stringify($event$$9_params$$),context:this}).always(function(){$inputs$$.prop("disabled",!1)}).done(function($resp$$){jQuery("#add-team-name").val("");this.data.is_privileged&&jQuery("#add-team-penalty").val(0);this.addTeamRow($resp$$.response.team,
!0,!0)}).fail(function($jqXHR$$){var $base_msg$$=$addTeamBtn$$.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)})},onRemoveBannerClick:function($event$$){var $removeBannerBtn$$=jQuery($event$$.target);$removeBannerBtn$$.prop("disabled",!0);jQuery.ajax({type:"DELETE",url:Kattis.API.ajax_session_banner,contentType:"application/json",data:JSON.stringify({short_name:this.data.short_name,csrf_token:this.data.csrf_token})}).always(function(){$removeBannerBtn$$.prop("disabled",
!1)}).done(function(){$removeBannerBtn$$.hide();jQuery("#session_banner").remove()}).fail(function($jqXHR$$){var $base_msg$$=$removeBannerBtn$$.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)})},createSession:function(){this.btnCreateSession.prop("disabled",!0);var $banner_startTime$$=this.getSessionTimeUTC();if(null!==$banner_startTime$$){var $parameters$$={session_name:jQuery("#session-name").val().trim(),start_time:$banner_startTime$$.toISOString(),duration:this.parse_formatted_interval(this.txtDuration.val()),
is_open:jQuery("#is-open").is(":checked"),session_abbreviated_name:jQuery("#session-abbreviated-name").val(),csrf_token:this.data.csrf_token};this.data.existing&&jQuery.extend($parameters$$,{old_short_name:this.data.short_name});this.data.is_privileged&&jQuery.extend($parameters$$,{cutoff:this.parse_formatted_interval(this.txtCutoff.val()),short_name:this.txtShortName.val(),is_ranked:jQuery("#is-ranked").is(":checked"),show_first_to_solve:jQuery("#show-first-to-solve").is(":checked"),show_group_leaders:jQuery("#show-group-leaders").is(":checked"),
show_flags:jQuery("#show-flags").is(":checked"),show_logos:jQuery("#show-logos").is(":checked"),submission_penalty:jQuery("#submission-penalty").val(),scoreboard_limit:jQuery("#scoreboard-limit").val(),scoreboard_submission_threshold:jQuery("#scoreboard-submission-threshold").val(),scoreboard_solved_threshold:jQuery("#scoreboard-solved-threshold").val(),timestep_in_seconds:jQuery("#timestep-in-seconds").val(),autofinalize:jQuery("#autofinalize").is(":checked"),classification:jQuery("#classification").val()});
if(this.data.is_privileged)if($parameters$$.banner_image=null,$banner_startTime$$=document.getElementById("banner-image"),$banner_startTime$$.files&&$banner_startTime$$.files[0]){var $reader$$=new FileReader;$reader$$.onload=function($e$$){$parameters$$.banner_image=btoa($e$$.target.result);this.internalCreateSession($parameters$$)}.bind(this);$reader$$.readAsBinaryString($banner_startTime$$.files[0])}else this.internalCreateSession($parameters$$);else this.internalCreateSession($parameters$$)}},
internalCreateSession:function($parameters$$){jQuery.ajax({type:"PUT",url:Kattis.API.ajax_session_edit,contentType:"application/json",data:JSON.stringify($parameters$$),context:this}).always(function(){this.btnCreateSession.prop("disabled",!1)}).done(function($resp$$){window.location.replace($resp$$.response.redirect)}).fail(function($jqXHR$$){var $base_msg$$=this.btnCreateSession.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)})},publishSession:function(){confirm("Are you sure you want to publish? Publishing cannot be undone.")&&
(this.btnPublishSession.prop("disabled",!0),this.spanPublishProgress.html('<i class="fa fa-spinner fa-spin"></i>'),jQuery.ajax({type:"PUT",url:Kattis.API.ajax_session_publish,contentType:"application/json",data:JSON.stringify({csrf_token:this.data.csrf_token,short_name:this.data.short_name}),context:this}).done(function(){this.spanPublishProgress.html('<i class="glyphicon glyphicon-ok"></i>');window.location.reload(!0)}).fail(function($jqXHR$$){this.spanPublishProgress.html('<i class="glyphicon glyphicon-remove"></i>');
this.btnPublishSession.prop("disabled",!1);var $base_msg$$=this.btnPublishSession.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)}))},getTimeFromString:function($date$$2_str$$){if(!/^\d\d\d\d-\d\d-\d\d \d\d:\d\d(:\d\d)?$/.test($date$$2_str$$))return null;var $parts_time$$=$date$$2_str$$.split(" ");$date$$2_str$$=$parts_time$$[0];$parts_time$$=$parts_time$$[1];return!Kattis.util.isValidDate($date$$2_str$$)||!Kattis.util.isValidTime($parts_time$$)?null:new Date($date$$2_str$$+
"T"+$parts_time$$+"Z")},getSessionTimeUTC:function(){return this.getTimeFromString(this.txtStartTime.val())},isInt:function($value$$){return!isNaN($value$$)&&parseInt(Number($value$$))==$value$$&&!isNaN(parseInt($value$$,10))},parse_formatted_minutes:function($h$$5_str$$){var $m$$1_parts$$=$h$$5_str$$.split(":");if(2!==$m$$1_parts$$.length)return null;$h$$5_str$$=$m$$1_parts$$[0];$m$$1_parts$$=$m$$1_parts$$[1];if(!this.isInt($h$$5_str$$)||!this.isInt($m$$1_parts$$)||!$h$$5_str$$.match(/^\d+$/)||!$m$$1_parts$$.match(/^\d\d$/))return null;
$h$$5_str$$=parseInt($h$$5_str$$,10);$m$$1_parts$$=parseInt($m$$1_parts$$,10);return 0>$h$$5_str$$||0>$m$$1_parts$$||60<=$m$$1_parts$$?null:60*$h$$5_str$$+$m$$1_parts$$},parse_formatted_interval:function($minutes$$2_str$$){if(!/^\d+:\d\d(:\d\d)?$/.test($minutes$$2_str$$))return null;var $parts$$2_result$$1_seconds$$=$minutes$$2_str$$.split(":");if(2===$parts$$2_result$$1_seconds$$.length)return $parts$$2_result$$1_seconds$$=this.parse_formatted_minutes($minutes$$2_str$$),null===$parts$$2_result$$1_seconds$$||
60*$parts$$2_result$$1_seconds$$>this.MAX_INT_32?null:60*$parts$$2_result$$1_seconds$$;$minutes$$2_str$$=this.parse_formatted_minutes([$parts$$2_result$$1_seconds$$[0],$parts$$2_result$$1_seconds$$[1]].join(":"));$parts$$2_result$$1_seconds$$=$parts$$2_result$$1_seconds$$[2];if(null===$minutes$$2_str$$||!this.isInt($parts$$2_result$$1_seconds$$))return null;$parts$$2_result$$1_seconds$$=parseInt($parts$$2_result$$1_seconds$$,10);if(0>$parts$$2_result$$1_seconds$$||60<=$parts$$2_result$$1_seconds$$)return null;
$parts$$2_result$$1_seconds$$=60*$minutes$$2_str$$+$parts$$2_result$$1_seconds$$;return $parts$$2_result$$1_seconds$$>this.MAX_INT_32?null:$parts$$2_result$$1_seconds$$},format_minutes:function($minutes$$){$minutes$$=Math.floor($minutes$$);return Math.floor($minutes$$/60)+":"+twodigit($minutes$$%60)},areTimeFieldsChanged:function(){return this.startTimeVal!==this.txtStartTime.val()||this.durationVal!==this.txtDuration.val()||this.data.is_privileged&&this.cutoffVal!==this.txtCutoff.val()?!0:!1},validateStartTime:function(){var $startDate$$=
this.getSessionTimeUTC();if(null===$startDate$$)return this.spanStartHint.text("Invalid start time"),this.spanFinishHint.text("Invalid start time"),this.data.is_privileged&&this.spanCutoffHint.text("Invalid start time"),!1;this.spanStartHint.text($startDate$$.toString());return!0},validateDuration:function(){var $durationParsed_endDate$$=this.parse_formatted_interval(this.txtDuration.val());if(null===$durationParsed_endDate$$)return this.spanFinishHint.text("Invalid duration"),this.data.is_privileged&&
this.spanCutoffHint.text("Invalid duration"),!1;if(!this.data.is_privileged&&$durationParsed_endDate$$>this.MAX_UNPRIVILEGED_DURATION)return this.spanFinishHint.text("Maximal duration is limited to 168 hours"),!1;var $startDate$$=this.getSessionTimeUTC(),$durationParsed_endDate$$=new Date($startDate$$.getTime()+1E3*$durationParsed_endDate$$);this.spanFinishHint.text($durationParsed_endDate$$.toString());return!0},validateCutoff:function(){if(!this.data.is_privileged)return!0;var $durationParsed$$1_endDate$$=
this.parse_formatted_interval(this.txtDuration.val()),$cutoffParsed_freezeStart$$=this.parse_formatted_interval(this.txtCutoff.val());if(null===$cutoffParsed_freezeStart$$||$cutoffParsed_freezeStart$$>$durationParsed$$1_endDate$$)return this.spanCutoffHint.text("Invalid cutoff"),!1;if(0===$cutoffParsed_freezeStart$$)this.spanCutoffHint.text("None");else{var $startDate$$=this.getSessionTimeUTC(),$durationParsed$$1_endDate$$=new Date($startDate$$.getTime()+1E3*$durationParsed$$1_endDate$$),$cutoffParsed_freezeStart$$=
new Date($durationParsed$$1_endDate$$.getTime()-1E3*$cutoffParsed_freezeStart$$);this.spanCutoffHint.text($cutoffParsed_freezeStart$$.toString())}return!0},modifyTimeHints:function(){this.areTimeFieldsChanged()&&(this.timehintsValid=!0,this.startTimeVal=this.txtStartTime.val(),this.durationVal=this.txtDuration.val(),this.data.is_privileged&&(this.cutoffVal=this.txtCutoff.val()),[this.validateStartTime,this.validateDuration,this.validateCutoff].forEach(function($validator$$){this.timehintsValid&&(this.timehintsValid=
$validator$$.call(this))},this),this.data.existing||this.updateSaveButton())},addProblemRow:function($response$$,$animate$$){var $row$$=jQuery(this.problem_tmpl($response$$)),$animated$$=$animate$$?$row$$.children("td").children("div"):jQuery();$row$$.find(".problem-remove").bind("click",this.removeProblem.bind(this));$animated$$.attr("style","display: none;");jQuery("#tblProblems tbody").append($row$$);$animated$$.slideDown("fast")},removeProblem:function($event$$11_parameters$$){var $removeProblemBtn$$=
jQuery($event$$11_parameters$$.target);$event$$11_parameters$$=$removeProblemBtn$$.closest("tr");var $inputs$$=$removeProblemBtn$$.closest("tr").find(":input");$inputs$$.prop("disabled",!0);$event$$11_parameters$$={short_name:this.data.short_name,problem_name:$event$$11_parameters$$.attr("data-name"),csrf_token:this.data.csrf_token};jQuery.ajax({type:"DELETE",url:Kattis.API.ajax_session_problem,contentType:"application/json",data:JSON.stringify($event$$11_parameters$$),context:this}).done(function($resp$$){this.replaceProblems($resp$$.response.problems)}).fail(function($jqXHR$$){$inputs$$.prop("disabled",
!1);var $base_msg$$=$removeProblemBtn$$.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code);this.resetProblems()})},resetProblems:function(){jQuery("#tblProblems tbody").empty();this.data.selected_problems.forEach(this.addProblemRow,this);var $nonselected_problems$$=jQuery(this.data.all_problem_names).not(jQuery.map(this.data.selected_problems,function($problem$$){return $problem$$.name})).get();jQuery("#problems").replaceWith(jQuery('<datalist id="problems" />').append(jQuery.map($nonselected_problems$$,
function($o$$){return jQuery("<option />").attr("value",$o$$)})))},replaceProblems:function($response$$){this.data.selected_problems=$response$$;this.resetProblems()},addJudgeRow:function($response$$,$animate$$){var $row$$=jQuery(this.judge_tmpl($response$$)),$animated$$=$animate$$?$row$$.children("td").children("div"):jQuery();$row$$.find(".judge-remove").bind("click",this.removeJudge.bind(this));$row$$.find(".judge-may-clarify").bind("change",this.updateJudge.bind(this));$animated$$.attr("style",
"display: none;");this.tbodyJudge.append($row$$);$animated$$.slideDown("fast")},removeJudge:function($event$$12_params$$){var $removeJudgeBtn$$=jQuery($event$$12_params$$.target);$removeJudgeBtn$$.prop("disabled",!0);var $tr$$=$removeJudgeBtn$$.closest("tr");$event$$12_params$$={short_name:this.data.short_name,username:$tr$$.attr("data-username"),csrf_token:this.data.csrf_token};jQuery.ajax({type:"DELETE",url:Kattis.API.ajax_session_judge,contentType:"application/json",data:JSON.stringify($event$$12_params$$),
context:this}).done(function(){$tr$$.children("td").children("div").slideUp("fast",function(){$tr$$.remove()})}).fail(function($jqXHR$$){$removeJudgeBtn$$.prop("disabled",!1);var $base_msg$$=$removeJudgeBtn$$.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)})},updateJudge:function($event$$13_parameters$$){var $el$$=jQuery($event$$13_parameters$$.target);$el$$.prop("disabled",!0);var $tr$$=$el$$.closest("tr");$event$$13_parameters$$={short_name:this.data.short_name,
username:$tr$$.attr("data-username"),may_clarify:$tr$$.find(".judge-may-clarify").is(":checked"),csrf_token:this.data.csrf_token};jQuery.ajax({type:"PUT",url:Kattis.API.ajax_session_judge,contentType:"application/json",data:JSON.stringify($event$$13_parameters$$),context:this}).always(function(){$el$$.prop("disabled",!1)}).done(function($resp$$){$tr$$.find(".judge-username a").text($resp$$.username).attr("href",$resp$$.profile_url);$tr$$.find(".judge-name").text($resp$$.name);$tr$$.find(".judge-may-clarify").prop("checked",
$resp$$.may_clarify)}).fail(function($jqXHR$$){var $base_msg$$=$el$$.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)})},addTeamRow:function($response$$,$animate$$,$beginEdit$$){var $team_tpl$$=tmpl("team_tmpl"),$team_member_tmpl$$=tmpl("team_member_tmpl"),$row$$=jQuery($team_tpl$$($response$$));$response$$.members.forEach(function($member$$){var $m$$=jQuery($team_member_tmpl$$($member$$));$m$$.find(".team-member-remove").bind("click",this.removeTeamMember.bind(this));
$row$$.find("li.team-member-add").before($m$$);$member$$.accepted||(!0===$animate$$?jQuery("#pending-invitation-info").slideDown("fast"):jQuery("#pending-invitation-info").show())},this);!0===$beginEdit$$?$row$$.find(".show-no-edit").hide():$row$$.find(".show-edit").hide();$row$$.find(".team-member-accepted").prop("checked",this.autoaccept);$row$$.find(".team-edit").bind("click",function(){jQuery(this).closest("tr").find(".show-edit, .show-no-edit").toggle()});$row$$.find(".team-done").bind("click",
this.updateTeam.bind(this));$row$$.find(".team-name").keypress(function($e$$){var $btn$$=$row$$.find("button.team-done");13===$e$$.keyCode&&!$btn$$.prop("disabled")&&$btn$$.click()});$row$$.find(".team-remove").bind("click",this.removeTeam.bind(this));$row$$.find("button.team-member-add").bind("click",this.onAddTeamMember.bind(this));$row$$.find("input.team-member-username").bind("change keyup input",function(){$row$$.find("button.team-member-add").prop("disabled",""===jQuery(this).val())});$row$$.find("input.team-member-username").keyup(function($e$$){var $btn$$=
$row$$.find("button.team-member-add");13==$e$$.keyCode&&!$btn$$.prop("disabled")&&$btn$$.click()});this.tbodyTeam.append($row$$);!0===$beginEdit$$&&$row$$.find(".team-member-username").focus()},onAddTeamMember:function($event$$14_params$$){var $addTeamMemberBtn$$=jQuery($event$$14_params$$.target),$li$$=$addTeamMemberBtn$$.closest("li");$addTeamMemberBtn$$.prop("disabled",!0);var $row$$=$addTeamMemberBtn$$.closest("tr");$event$$14_params$$={team_id:$row$$.attr("data-team-id"),username:$li$$.find("input.team-member-username").val(),
accepted:this.autoaccept,csrf_token:this.data.csrf_token};jQuery.ajax({type:"POST",url:Kattis.API.ajax_session_team_member,contentType:"application/json",data:JSON.stringify($event$$14_params$$),context:this}).always(function(){$row$$.find("input.team-member-username").focus()}).done(function($member$$1_resp$$){$member$$1_resp$$=jQuery(this.team_member_tmpl($member$$1_resp$$.response.team_member));$member$$1_resp$$.find(".team-member-remove").bind("click",this.removeTeamMember.bind(this));$li$$.before($member$$1_resp$$);
$row$$.find("input.team-member-username").val("");$member$$1_resp$$.accepted||jQuery("#pending-invitation-info").slideDown("fast")}).fail(function($jqXHR$$){$addTeamMemberBtn$$.prop("disabled",!1);var $base_msg$$=$addTeamMemberBtn$$.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)})},removeTeam:function($event$$15_parameters$$){var $removeTeamBtn$$=jQuery($event$$15_parameters$$.target),$tr$$=$removeTeamBtn$$.closest("tr"),$inputs$$=$tr$$.find(":input");$inputs$$.prop("disabled",
!0);$event$$15_parameters$$={short_name:this.data.short_name,team_id:$tr$$.attr("data-team-id"),csrf_token:this.data.csrf_token};jQuery.ajax({type:"DELETE",url:Kattis.API.ajax_session_team,contentType:"application/json",data:JSON.stringify($event$$15_parameters$$),context:this}).done(function(){$tr$$.children("td").children("div").slideUp("fast",function(){$tr$$.remove()});jQuery('[data-invitation-state="pending"]').length||jQuery("#pending-invitation-info").slideUp("fast")}).fail(function($jqXHR$$){$inputs$$.prop("disabled",
!1);$tr$$.find("button.team-member-add").prop("disabled",""==$tr$$.find(".team-member-username").val());var $base_msg$$=$removeTeamBtn$$.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)})},updateTeam:function($event$$16_parameters$$){var $doneTeamBtn$$=jQuery($event$$16_parameters$$.target),$tr$$=$doneTeamBtn$$.closest("tr"),$inputs$$=$tr$$.find(":input");$inputs$$.prop("disabled",!0);$event$$16_parameters$$={short_name:this.data.short_name,team_id:$tr$$.attr("data-team-id"),
team_name:$tr$$.find("input.team-name").val(),csrf_token:this.data.csrf_token};this.data.is_privileged&&($event$$16_parameters$$.penalty_adjustment=$tr$$.find("input.team-penalty").val());jQuery.ajax({type:"PUT",url:Kattis.API.ajax_session_team,contentType:"application/json",data:JSON.stringify($event$$16_parameters$$),context:this}).always(function(){$inputs$$.prop("disabled",!1);$tr$$.find("button.team-member-add").prop("disabled",""==$tr$$.find(".team-member-username").val());$tr$$.find(".show-edit, .show-no-edit").toggle()}).done(function($resp$$){$resp$$=
$resp$$.response.team;$tr$$.find("input.team-name").val($resp$$.team_name);$tr$$.find("span.team-name").text($resp$$.team_name);this.data.is_privileged&&($tr$$.find("input.team-penalty").val($resp$$.penalty_adjustment),$tr$$.find("span.team-penalty").text($resp$$.penalty_adjustment))}).fail(function($jqXHR$$){var $base_msg$$=$doneTeamBtn$$.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)})},removeTeamMember:function($event$$17_parameters$$){var $removeTeamMemberBtn$$=
jQuery($event$$17_parameters$$.target);$removeTeamMemberBtn$$.prop("disabled",!0);var $li$$=$removeTeamMemberBtn$$.closest("li");$event$$17_parameters$$={team_id:$removeTeamMemberBtn$$.closest("tr").attr("data-team-id"),username:$li$$.attr("data-username"),csrf_token:this.data.csrf_token};jQuery.ajax({type:"DELETE",url:Kattis.API.ajax_session_team_member,contentType:"application/json",data:JSON.stringify($event$$17_parameters$$),context:this}).done(function(){$li$$.remove();jQuery('[data-invitation-state="pending"]').length||
jQuery("#pending-invitation-info").slideUp("fast")}).fail(function($jqXHR$$){$removeTeamMemberBtn$$.prop("disabled",!1);var $base_msg$$=$removeTeamMemberBtn$$.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)})}});jQuery.extend(jQuery.ns("Kattis.views.contest.resolver"),{init:function(){var $data$$=this.data,$info$$=$data$$.info,$length$$=$info$$.length,$cutoff$$=$info$$.cutoff;jQuery(function($$$$){function $get_cw_elem$$($id$$){return $$$$($control_window$$.document.getElementById($id$$))}function $update_cell_width$$(){$$$$(".team_problem_cell").css("width",$get_cw_elem$$("resolver_cell_width").val()+"px")}function $focus_on_element$$($elem$$,$callback$$){$$$$("html, body").stop().animate({scrollTop:$elem$$.offset().top-
$$$$(window).height()/2+$elem$$.height()/2},200,function(){$callback$$&&$callback$$()})}function $Team$$($team$$,$problems$$){for(var $row$$=$$$$($team_row_tmpl$$({team:$team$$,problems:$problems$$})),$no_cell$$=$row$$.children(".rank"),$points_cell$$=$row$$.children(".score"),$time_cell$$=$row$$.children(".time"),$problem_cells$$=$row$$.children(".team_problem_cell"),$ps$$={},$i$$0$$=0;$i$$0$$<$problems$$.length;$i$$0$$++)$ps$$[$problems$$[$i$$0$$].id]={cell:$$$$($problem_cells$$[$i$$0$$]),score:0,
submissions:0,pending:[],last_improvement:0,max_score:$problems$$[$i$$0$$].max_score};return{id:$team$$.id,name:$team$$.name,row:$row$$,cur_row:$row$$,no_cell:$no_cell$$,points_cell:$points_cell$$,time_cell:$time_cell$$,problems:$ps$$,points:0,get_last_improvement:function(){for(var $res$$=0,$i$$=0;$i$$<$problem_ids$$.length;$i$$++)$res$$=Math.max($res$$,this.problems[$problem_ids$$[$i$$]].last_improvement);return $res$$},reset:function(){this.no_cell.text("");this.points_cell.text("0");this.time_cell.text("0");
for(var $i$$=this.points=0;$i$$<$problem_ids$$.length;$i$$++){var $id$$=$problem_ids$$[$i$$];this.problems[$id$$].score=0;this.problems[$id$$].submissions=0;this.problems[$id$$].last_improvement=0;this.problems[$id$$].pending=[];this.problems[$id$$].cell.empty();this.problems[$id$$].cell.removeClass("solved attempted partial-score pending")}},handle_submission:function($sub$$,$i$$,$check_only$$){if(!$sub$$.judged)return!1;var $problem$$=this.problems[$sub$$.problem];if("CE"===$sub$$.result||1E-9>
Math.abs($problem$$.score-$problem$$.max_score))return!1;var $after_freeze$$=$sub$$.time>=($length$$-$cutoff$$)/60;if(!$after_freeze$$||$i$$)$problem$$.submissions++,this.points-=$problem$$.score,$sub$$.score>$problem$$.score+1E-9?($problem$$.score=$sub$$.score,$problem$$.last_improvement=Math.floor($sub$$.time)):1E-9>Math.abs($sub$$.score-$problem$$.score)&&($problem$$.last_improvement=Math.min($problem$$.last_improvement,Math.floor($sub$$.time))),this.points+=$problem$$.score;if($after_freeze$$)if($i$$){for($i$$=
0;$i$$<$problem$$.pending.length&&$problem$$.pending[$i$$]!==$sub$$;)$i$$++;$i$$<$problem$$.pending.length&&($problem$$.pending[$i$$]=$problem$$.pending[$problem$$.pending.length-1],$problem$$.pending.pop());$problem$$.pending.sort(function($a$$,$b$$){return $b$$.time-$a$$.time})}else $problem$$.pending.push($sub$$);$check_only$$||(this.points_cell.text(this.points),this.time_cell.text(this.get_last_improvement()),$problem$$.cell.html($problem$$.score+"<br/>"+$problem$$.submissions+(0<$problem$$.pending.length?
"+"+$problem$$.pending.length:"")),$problem$$.cell.removeClass("solved attempted partial-score pending"),1E-9>Math.abs($problem$$.score-$problem$$.max_score)?$problem$$.cell.addClass("solved"):0<$problem$$.pending.length?$problem$$.cell.addClass("pending"):0===$problem$$.score?$problem$$.cell.addClass("attempted"):$problem$$.cell.addClass("partial-score"));return!0}}}function $row_animate$$($team$$,$time$$,$standings$$,$row$$,$no$$,$callback$$){for(var $at$$=$row$$.offset(),$height$$=$row$$.height(),
$width$$=$row$$.width(),$fills$$=[],$i$$=0;2>$i$$;$i$$++)$fills$$.push($$$$("<tr></tr>").append($$$$("<td></td>",{colspan:4+$problems$$.length}).css({height:"0",margin:"0",padding:"0"})));$fills$$[0].height(0).width($width$$);$row$$.replaceWith($fills$$[1]);$team$$.cur_row=$fills$$[1];$fills$$[1].height($height$$).width($width$$);$row$$.height($height$$).width($width$$);var $div$$=$$$$("<div></div>");$div$$.append($$$$("<table></table>").addClass("table table-kattis kattis-table-contest-standings").css({"border-top":"none",
"border-radius":"none"}).append($$$$("<tbody></tbody>").append($row$$))).width($width$$).height($height$$).css({position:"absolute",top:$at$$.top+"px",left:$at$$.left+1+"px"}).appendTo($$$$("#wrapper"));0===$no$$?$fills$$[0].prependTo($$$$("#standings tbody")):$fills$$[0].insertAfter($standings$$[$no$$-1].row);$team$$.cur_row=$fills$$[0];$fills$$[1].animate({height:"0"},$time$$);$fills$$[0].animate({height:$height$$},$time$$);$div$$.animate({top:$fills$$[0].offset().top+"px"},$time$$,function(){$row$$.width("auto").height("auto");
$fills$$[0].replaceWith($row$$);$team$$.cur_row=$row$$;$div$$.remove();$fills$$[1].remove();$callback$$&&$callback$$()})}function $update_standings$$($standings$$,$animate$$,$callback$$){$standings$$.sort(function($a$$,$b$$){if($a$$.points!==$b$$.points)return $b$$.points-$a$$.points;var $ali$$=$a$$.get_last_improvement(),$bli$$=$b$$.get_last_improvement();return 1E-9<Math.abs($ali$$-$bli$$)?$ali$$-$bli$$:$a$$.name!==$b$$.name?$a$$.name.localeCompare($b$$.name):0});var $row_at$$=0;(function next_row(){if($row_at$$===
$standings$$.length)$callback$$&&$callback$$();else{var $old_no_time$$=$standings$$[$row_at$$].row.index()+1,$no$$=$row_at$$+1;0<$standings$$[$row_at$$].points?$standings$$[$row_at$$].no_cell.text($no$$):$standings$$[$row_at$$].no_cell.text("");$no$$<$old_no_time$$?$animate$$?($old_no_time$$=parseInt($get_cw_elem$$("resolver_row_animate_time").val(),10)*(Math.abs($no$$-$old_no_time$$)+1),$row_animate$$($standings$$[$row_at$$],$old_no_time$$,$standings$$,$standings$$[$row_at$$].row,$no$$-1,function(){$row_at$$+=
1;next_row()})):($standings$$[$row_at$$].row.detach(),1===$no$$?$standings$$[$row_at$$].row.prependTo($$$$("#standings tbody")):$standings$$[$row_at$$].row.insertAfter($standings$$[$row_at$$-1].row),$row_at$$+=1,next_row()):($row_at$$+=1,next_row())}})()}var $control_window$$=window.open("","Kattis Resolver","width=450, height=400");$control_window$$.document.open();$control_window$$.document.write($$$$("#resolver_controls_wrapper").html());$control_window$$.document.title="Controls";$get_cw_elem$$("resolver_cell_width").change($update_cell_width$$);
var $possible_subs_table_header_tmpl$$=tmpl("table_header_tmpl"),$team_row_tmpl$$=tmpl("team_row_tmpl"),$header_row_i$$=$possible_subs_table_header_tmpl$$({all_captions:!0,problems:$data$$.problems});$$$$("#standings thead").append($header_row_i$$);for(var $problems$$=$data$$.problems,$problem_ids$$=[],$header_row_i$$=0;$header_row_i$$<$data$$.problems.length;$header_row_i$$++)$problem_ids$$.push($data$$.problems[$header_row_i$$].id);for(var $teams$$={},$team_ids$$=[],$standings$$=[],$header_row_i$$=
0;$header_row_i$$<$data$$.teams.length;$header_row_i$$++){var $team$$0$$=new $Team$$($data$$.teams[$header_row_i$$],$problems$$);$teams$$[$team$$0$$.id]=$team$$0$$;$team_ids$$.push($team$$0$$.id);$$$$("#standings tbody").append($team$$0$$.row);$standings$$.push($team$$0$$)}$$$$("#standings tbody").append($possible_subs_table_header_tmpl$$({all_captions:!1,problems:$data$$.problems}));$possible_subs_table_header_tmpl$$=$data$$.runs;$possible_subs_table_header_tmpl$$.sort(function($a$$,$b$$){return $a$$.time-
$b$$.time});for(var $subs$$=[],$header_row_i$$=0;$header_row_i$$<$possible_subs_table_header_tmpl$$.length;$header_row_i$$++)$team$$0$$=$teams$$[$possible_subs_table_header_tmpl$$[$header_row_i$$].team],$teams$$[$possible_subs_table_header_tmpl$$[$header_row_i$$].team].handle_submission($possible_subs_table_header_tmpl$$[$header_row_i$$],!0,!0)&&$subs$$.push($possible_subs_table_header_tmpl$$[$header_row_i$$]);var $resolver$$=function Resolver($subs$$){function $disable_buttons$$(){for(var $i$$=0;$i$$<
$all_buttons$$.length;$i$$++)$get_cw_elem$$($all_buttons$$[$i$$]).prop("disabled",!0).css("color","gray")}function $enable_buttons$$(){var $enable$$={};0<$sub_at$$&&!$is_playing$$&&($enable$$.resolver_reset=!0);$sub_at$$<$subs$$.length&&($is_playing$$?$enable$$.resolver_playback_pause=!0:($enable$$.resolver_playback_step=!0,$enable$$.resolver_playback_play=!0,$enable$$.resolver_playback_skip=!0));$sub_at$$>=$subs$$.length&&0<=$res_at$$&&($is_playing$$?$enable$$.resolver_resolve_pause=!0:($enable$$.resolver_resolve_step=
!0,$enable$$.resolver_resolve_play=!0));for(var $i$$=0;$i$$<$all_buttons$$.length;$i$$++){var $inc$$=$enable$$.hasOwnProperty($all_buttons$$[$i$$]);$get_cw_elem$$($all_buttons$$[$i$$]).prop("disabled",!$inc$$).css("color",$inc$$?"black":"gray")}}var $sub_at$$=0,$res_at$$=$standings$$.length-1,$res_problem$$=0,$has_focused_team$$=!1,$has_focused_problem$$=!1,$is_playing$$=!1,$all_buttons$$="resolver_reset resolver_playback_step resolver_playback_play resolver_playback_pause resolver_playback_skip resolver_resolve_step resolver_resolve_play resolver_resolve_pause".split(" ");
return{reset:function(){$sub_at$$=0;$res_at$$=$standings$$.length-1;problem_at=0;$$$$("#standings tr").removeClass("highlight");$$$$("#standings td").removeClass("resolve-problem");$has_focused_problem$$=$has_focused_team$$=!1;$disable_buttons$$();for(var $i$$=0;$i$$<$team_ids$$.length;$i$$++)$teams$$[$team_ids$$[$i$$]].reset();$update_standings$$($standings$$,!1,$enable_buttons$$)},playback_step:function(){$disable_buttons$$();var $sub$$=$subs$$[$sub_at$$];$teams$$[$sub$$.team].handle_submission($sub$$,
!1);$sub_at$$++;$update_standings$$($standings$$,!0,$enable_buttons$$)},playback_skip:function(){for($disable_buttons$$();$sub_at$$<$subs$$.length;){var $sub$$=$subs$$[$sub_at$$];$teams$$[$sub$$.team].handle_submission($sub$$,!1);$sub_at$$++}$update_standings$$($standings$$,!1,$enable_buttons$$)},playback_play:function(){function $end$$(){$anim$$||($that$$.playback_stop=null,$is_playing$$=!1,$enable_buttons$$())}function $time_to_next$$(){return 6E4*($subs$$[$sub_at$$].time-(0===$sub_at$$?0:$subs$$[$sub_at$$-
1].time))*parseFloat($get_cw_elem$$("resolver_time_multiplier").val())}function $process_sub$$(){if($running$$){var $sub$$=$subs$$[$sub_at$$];$teams$$[$sub$$.team].handle_submission($sub$$,!1);$sub_at$$++;$anim$$=!0;$update_standings$$($standings$$,!0,function(){$anim$$=!1;$sub_at$$<$subs$$.length&&$running$$?$cur_timeout$$=setTimeout($process_sub$$,$time_to_next$$()):$end$$()})}else $end$$()}$is_playing$$=!0;var $that$$=this,$running$$=!0,$anim$$=!1,$cur_timeout$$=null;this.playback_pause=function $this$playback_pause$(){$running$$=
!1;$disable_buttons$$();clearTimeout($cur_timeout$$);$end$$()};$cur_timeout$$=setTimeout($process_sub$$,$time_to_next$$());$enable_buttons$$()},resolve_step:function($skip_buttons$$,$callback$$){function $done$$(){$skip_buttons$$||$enable_buttons$$();$callback$$&&$callback$$()}$skip_buttons$$||$disable_buttons$$();if($has_focused_team$$)if($has_focused_problem$$){for(var $problem$$=$standings$$[$res_at$$].problems[$problem_ids$$[$res_problem$$]],$cur$$=$problem$$.score,$nxt$$=-1,$j$$=0;$j$$<$problem$$.pending.length;$j$$++)if($problem$$.pending[$j$$].score>
$cur$$&&(0>$nxt$$||$problem$$.pending[$j$$].score<$nxt$$))$nxt$$=$problem$$.pending[$j$$].score;$nxt$$=Math.max($nxt$$,0);a:for(;;){for($j$$=0;$j$$<$problem$$.pending.length;$j$$++)if($problem$$.pending[$j$$].score<=$nxt$$){$standings$$[$res_at$$].handle_submission($problem$$.pending[$j$$],!0);continue a}break}var $old_row$$=$standings$$[$res_at$$].row;$standings$$[$res_at$$].problems[$problem_ids$$[$res_problem$$]].cell.removeClass("resolve-problem");$focus_on_element$$($standings$$[$res_at$$].row);
$update_standings$$($standings$$,!0,function(){$old_row$$.removeClass("highlight");$has_focused_team$$=!0;$has_focused_problem$$=!1;$res_problem$$=0;$standings$$[$res_at$$].row.addClass("highlight");$done$$()})}else{for(;$res_problem$$<$problems$$.length&&!(0<$standings$$[$res_at$$].problems[$problem_ids$$[$res_problem$$]].pending.length);)$res_problem$$++;$res_problem$$<$problems$$.length?($standings$$[$res_at$$].problems[$problem_ids$$[$res_problem$$]].cell.addClass("resolve-problem"),$has_focused_problem$$=
!0):($standings$$[$res_at$$].row.removeClass("highlight"),$res_at$$--,$res_problem$$=0,0<=$res_at$$&&($standings$$[$res_at$$].row.addClass("highlight"),$has_focused_team$$=!0,$has_focused_problem$$=!1));0<=$res_at$$&&$focus_on_element$$($standings$$[$res_at$$].row);$done$$()}else $standings$$[$res_at$$].row.addClass("highlight"),$focus_on_element$$($standings$$[$res_at$$].row),$has_focused_team$$=!0,$done$$()},resolve_play:function($upto$$){function $end$$(){$anim$$||($that$$.resolve_stop=null,$is_playing$$=
!1,$enable_buttons$$())}function $step$$(){$running$$?($anim$$=!0,$that$$.resolve_step(!0,function(){$anim$$=!1;$res_at$$>=$upto$$?$cur_timeout$$=setTimeout($step$$,parseInt($get_cw_elem$$("resolver_resolve_timestep").val(),10)):$end$$()})):$end$$()}if(!($res_at$$<$upto$$)){$is_playing$$=!0;var $that$$=this,$running$$=!0,$anim$$=!1,$cur_timeout$$=null;this.resolve_pause=function $this$resolve_pause$(){$running$$=!1;$disable_buttons$$();clearTimeout($cur_timeout$$);$end$$()};$enable_buttons$$();$step$$()}}}}($subs$$);
$resolver$$.reset();$get_cw_elem$$("resolver_controls").submit(function(){return!1});$get_cw_elem$$("resolver_reset").click(function(){$resolver$$.reset()});$get_cw_elem$$("resolver_playback_step").click(function(){$resolver$$.playback_step()});$get_cw_elem$$("resolver_playback_play").click(function(){$resolver$$.playback_play()});$get_cw_elem$$("resolver_playback_pause").click(function(){$resolver$$.playback_pause()});$get_cw_elem$$("resolver_playback_skip").click(function(){$resolver$$.playback_skip()});
$get_cw_elem$$("resolver_resolve_step").click(function(){$resolver$$.resolve_step()});$get_cw_elem$$("resolver_resolve_play").click(function(){$resolver$$.resolve_play(parseInt($get_cw_elem$$("resolver_resolve_play_upto").val(),10))});$get_cw_elem$$("resolver_resolve_pause").click(function(){$resolver$$.resolve_pause()});$$$$($control_window$$.document).on("keydown",function($e$$23_i$$){var $ids$$=[];39===$e$$23_i$$.keyCode?$ids$$=["resolver_playback_step","resolver_resolve_step"]:32===$e$$23_i$$.keyCode&&
($ids$$=["resolver_playback_play","resolver_playback_pause","resolver_resolve_play","resolver_resolve_pause"]);for($e$$23_i$$=0;$e$$23_i$$<$ids$$.length;$e$$23_i$$++){var $elem$$=$get_cw_elem$$($ids$$[$e$$23_i$$]);if(!$elem$$.prop("disabled")){$elem$$.click();break}}});$update_cell_width$$()})}});jQuery.extend(jQuery.ns("Kattis.views.submissions.create"),{init:function(){this.editors=[];this.initProblemSelector();this.initLanguageSelector();this.initProblems();this.initLanguages();this.initEditors();jQuery("#submit-solution-form").on("submit",this.setEditorValues.bind(this));var $file_upload$$=jQuery("#sub_files_input");$file_upload$$.on("change",this.onSubmissionFilesChanged.bind(this));$file_upload$$.on("keydown",this.onSubmissionFilesKeypressed.bind(this));$file_upload$$.each(function($i$$,
$el$$){this.update_file_list($el$$)}.bind(this));this.mainBox(this.data.languages._default,this.data.form_mainclass);jQuery('[name="editor_visible"]').click(this.onSwitchToEditor.bind(this));jQuery("#file-upload").click(this.onSwitchToFileUpload.bind(this));jQuery("#cancel").click(this.onCancelClicked.bind(this))},initProblemSelector:function(){var $title$$=this.data.is_contest?"fulltitle":"problem_name";jQuery("#problem_select").select2({placeholder:this.data.problems.placeholder,data:this.data.problems.available.map(function($p$$){return{id:$p$$.problem_name,
text:$p$$[$title$$]}})})},initLanguageSelector:function(){var $input$$=jQuery("#language_select");$input$$.select2({placeholder:this.data.languages.placeholder,data:this.data.languages.available.map(function($language$$){return{id:$language$$.language_name,text:$language$$.language_name}})});$input$$.on("change",this.onLanguageChanged.bind(this))},initProblems:function(){this.problems={};this.data.problems.available.forEach(function($p$$){this.problems[$p$$.problem_name]=$p$$.problem_name;if(this.data.is_contest){var $letter$$=
$p$$.fulltitle.split(" - ")[0].toLowerCase();this.problems[$letter$$]=$p$$.problem_name}},this)},initLanguages:function(){this.languages={};this.data.languages.available.forEach(function($language$$){this.languages[$language$$.language_name]=!0},this)},onLanguageChanged:function(){this.setLanguage(this.getSelectedLanguage(),"")},initEditors:function(){var $self$$=this;jQuery(".source-code-editor").each(function(){var $editor$$=$self$$.newEditor(this.id),$mode$$="ace/mode/"+getAceMode($self$$.data.languages._default);
$editor$$.setTheme("ace/theme/textmate");$editor$$.getSession().setMode($mode$$);$editor$$.setShowPrintMargin(!1);$editor$$.session.setUseWorker(!1);jQuery(this).parents("#editor_resize").resizable({handles:"se",grid:[1E4,1],resize:function(){$editor$$.resize()}})})},mainBox:function($language_name$$,$mainclass$$){var $content$$=1<this.data.filecount||1<this.editors.length,$help$$="",$label$$="",$display$$=!0,$use_filename$$=!0,$box_lang$$;$language_name$$=$language_name$$.toLowerCase();0===$language_name$$.indexOf("java")&&
0!==$language_name$$.indexOf("javascript")?($box_lang$$="java",$use_filename$$=!1):0===$language_name$$.indexOf("javascript")&&$content$$?$box_lang$$="javascript":0===$language_name$$.indexOf("pascal")?$box_lang$$="pascal":0===$language_name$$.indexOf("php")&&$content$$?$box_lang$$="php":0===$language_name$$.indexOf("python")&&$content$$?$box_lang$$="python":0===$language_name$$.indexOf("ruby")&&$content$$?$box_lang$$="ruby":0===$language_name$$.indexOf("scala")?($box_lang$$="scala",$use_filename$$=
!1):0===$language_name$$.indexOf("kotlin")?($box_lang$$="kotlin",$use_filename$$=!1):$display$$=!1;$display$$&&($help$$=this.data.main_box_msg[$box_lang$$].help,$label$$=this.data.main_box_msg[$box_lang$$].label);$box_lang$$=jQuery("#mainBox");var $input$$=$box_lang$$.find("#main_select");$mainclass$$||(0<$input$$.length&&($mainclass$$=$input$$.val()),$content$$&&$use_filename$$&&($mainclass$$=this.adjustFilename($mainclass$$)));$content$$="";$display$$&&($content$$=["<div class='form-group'>","<label for='main_select' title='"+
$help$$+"'>",$label$$,"</label>","<input class='form-control' id='main_select' title='"+$help$$+"' type='text' name='mainclass' value='"+escapeHtml($mainclass$$)+"' tabindex='4' />","</div>"].join(""));$box_lang$$.html($content$$)},hideEditor:function($name$$){jQuery("input[name='type']").val("files");jQuery("#editor_resize").css("display","none")},showEditor:function($name$$){jQuery("input[name='type']").val("editor");jQuery("#editor_resize").css("display","block")},newEditor:function($name$$){var $editor$$=
ace.edit($name$$);this.editors.push({name:$name$$,editor:$editor$$});return $editor$$},setEditorValues:function(){for(var $editors$$=this.editors,$i$$=0;$i$$<$editors$$.length;++$i$$){var $id$$=$editors$$[$i$$].name+"_submit",$content$$=$editors$$[$i$$].editor.getValue();jQuery("#"+$id$$).val($content$$)}},setEditorLanguage:function($language_name$$1_mode$$){$language_name$$1_mode$$="ace/mode/"+getAceMode($language_name$$1_mode$$);for(var $editors$$=this.editors,$i$$=0;$i$$<$editors$$.length;++$i$$)$editors$$[$i$$].editor.getSession().setMode($language_name$$1_mode$$)},
setLanguage:function($language_name$$,$mainclass$$){this.setEditorLanguage($language_name$$);this.mainBox($language_name$$,$mainclass$$)},getSelectedLanguage:function(){return jQuery("#language_select").val()},adjustFilename:function($filename$$){if(!jQuery("#file_dialog").is(":visible"))return $filename$$;var $files$$=jQuery("#sub_files_input")[0].files;if(!$files$$)return $filename$$;for(var $i$$=0;$i$$<$files$$.length;$i$$++)if(/^[Mm]ain\./.test($files$$[$i$$].name))return $files$$[$i$$].name;
for($i$$=0;$i$$<$files$$.length;$i$$++)if($files$$[$i$$].name===$filename$$)return $filename$$;return $files$$[0]?$files$$[0].name:$filename$$},fileDialogEnabled:function($sub_files$$,$mainclass$$){var $language_name$$=this.getSelectedLanguage();this.data.filecount=$sub_files$$.files?$sub_files$$.files.length:1;this.mainBox($language_name$$,$mainclass$$||"")},editorEnabled:function(){var $language_name$$=this.getSelectedLanguage();this.data.filecount=1;this.mainBox($language_name$$,"")},submitForm:function($form$$){"function"===
typeof $form$$.submit?$form$$.submit():$form$$.submit.click()},isLanguageAvailable:function($lang$$){return!!this.languages[$lang$$]},languageFromExtension:function($ext$$,$all_exts$$){var $extMap_has_c$$={c:"C","c#":"C#","c++":"C++",C:"C++",cc:"C++",cpp:"C++",cs:"C#",cxx:"C++",go:"Go",hs:"Haskell",java:"Java",js:"JavaScript",m:"Objective-C",pas:"Pascal",php:"PHP",pl:"Prolog",rb:"Ruby",scala:"Scala",sc:"Scala",kt:"Kotlin"};if("C"===$ext$$)return"C++";$ext$$=$ext$$.toLowerCase();if($extMap_has_c$$.hasOwnProperty($ext$$))return $extMap_has_c$$[$ext$$];
if("h"===$ext$$){for(var $extMap_has_c$$=!1,$i$$=0;$i$$<$all_exts$$.length;$i$$++)"c"===$all_exts$$[$i$$]&&($extMap_has_c$$=!0);return!this.isLanguageAvailable("C++")||this.isLanguageAvailable("C")&&$extMap_has_c$$?"C":"C++"}return null},isPython2:function($code$$2_i$$){if(!this.isLanguageAvailable("Python 2"))return!1;if(!this.isLanguageAvailable("Python 3"))return!0;var $re$$=/^\s*\bprint\b *[^ \(\),\]]|\braw_input\b/,$lines$$=$code$$2_i$$.split("\n");if(0===$code$$2_i$$.lastIndexOf("#!",0)){if(-1!==
$lines$$[0].indexOf("python2"))return!0;if(-1!==$lines$$[0].indexOf("python3"))return!1}for($code$$2_i$$=0;$code$$2_i$$<$lines$$.length;$code$$2_i$$++){var $line$$=$lines$$[$code$$2_i$$],$ind$$=$line$$.indexOf("#");-1!==$ind$$&&($line$$=$line$$.substr(0,$ind$$));if($re$$.test($line$$))return!0}return!1},readFile:function($file$$,$options$$){var $scope$$=$options$$.scope||this,$reader$$=new FileReader;$reader$$.onload=function(){var $data$$=$reader$$.result,$ind$$=$data$$.indexOf("base64,");-1!==$ind$$?
($data$$=atob($data$$.substr($ind$$+7)),$options$$.success.call($scope$$,$data$$)):$options$$.failure.call($scope$$)}.bind(this);$reader$$.onerror=$reader$$.onabort=function $$reader$$$onabort$(){$options$$.failure.call($scope$$)};$reader$$.readAsDataURL($file$$)},guessProblem:function($files$$,$done$$){if($files$$)for(var $i$$=0;$i$$<$files$$.length;$i$$++){var $name$$=$files$$[$i$$].name.toLowerCase(),$ind$$=$name$$.indexOf(".");-1!==$ind$$&&($name$$=$name$$.substr(0,$ind$$));if(this.problems.hasOwnProperty($name$$)){$done$$.call(this,
this.problems[$name$$]);break}}},checkJavaFile:function($file$$,$index$$,$options$$){var $scope$$=$options$$.scope||this,$filename$$=$file$$.name;/\.java$/i.test($filename$$)?($filename$$=$filename$$.slice(0,-5),this.readFile($file$$,{success:function($data$$){if(/ main\s*\(/.test($data$$)){if(-1===$data$$.indexOf("class "+$filename$$)){var $m$$=$data$$.match(/\bclass\s*(\w+)/);$filename$$=$m$$?$m$$[1]:$filename$$}$m$$=$data$$.match(/(?:\n|^)package +([\w.]+) *;/);$options$$.success.call($scope$$,
$m$$?$m$$[1]+"."+$filename$$:$filename$$)}else $options$$.failure.call($scope$$,$index$$,$options$$)},failure:function(){$options$$.failure.call($scope$$,$index$$,$options$$)},scope:this})):$options$$.failure.call($scope$$,$index$$,$options$$)},checkScalaFile:function($file$$,$index$$,$options$$){var $scope$$=$options$$.scope||this,$filename$$=$file$$.name;/\.sc(ala)?$/i.test($filename$$)?($filename$$=/\.sc$/i.test($filename$$)?$filename$$.slice(0,-3):$filename$$.slice(0,-6),this.readFile($file$$,
{success:function($data$$){if(/ main\s*\(/.test($data$$)){if(-1===$data$$.indexOf("class "+$filename$$)){var $m$$=$data$$.match(/\bclass\s*(\w+)/);$filename$$=$m$$?$m$$[1]:$filename$$}$m$$=$data$$.match(/(?:\n|^)package +([\w.]+)/);console.log($data$$);console.log("m = ",$m$$);$options$$.success.call($scope$$,$m$$?$m$$[1]+"."+$filename$$:$filename$$)}else $options$$.failure.call($scope$$,$index$$,$options$$)},failure:function(){$options$$.failure.call($scope$$,$index$$,$options$$)},scope:this})):
$options$$.failure.call($scope$$,$index$$,$options$$)},checkKotlinFile:function($file$$,$index$$,$options$$){var $scope$$=$options$$.scope||this;filename=$file$$.name;if(/\.kt$/i.test(filename)){filename=filename.slice(0,-3);var $mainclass$$=filename.charAt(0).toUpperCase()+filename.slice(1)+"Kt";this.readFile($file$$,{success:function($data$$29_m$$){/fun\s+main\s*\(/.test($data$$29_m$$)?(($data$$29_m$$=$data$$29_m$$.match(/(?:\n|^)package +([\w.]+) *;/))&&($mainclass$$=$data$$29_m$$[1]+"."+$mainclass$$),
$options$$.success.call($scope$$,$mainclass$$)):$options$$.failure.call($scope$$,$index$$,$options$$)},failure:function(){$options$$.failure.call($scope$$,$index$$,$options$$)},scope:this})}else $options$$.failure.call($scope$$,$index$$,$options$$)},checkPascalFile:function($file$$,$index$$,$options$$){var $scope$$=$options$$.scope||this,$filename$$=$file$$.name;/\.pas$/i.test($filename$$)?this.readFile($file$$,{success:function($data$$){/^\s*[Pp]rogram\s*\(/.test($data$$)?$options$$.success.call($scope$$,
$filename$$):$options$$.failure.call($scope$$,$index$$,$options$$)},failure:function(){$options$$.failure.call($scope$$,$index$$,$options$$)},scope:this}):$options$$.failure.call($scope$$,$index$$,$options$$)},guessJavaMainClass:function($files$$,$done$$){for(var $i$$=0;$i$$<$files$$.length;$i$$++)if(/^[Mm]ain\.java$/.test($files$$[$i$$].name)){$done$$.call(this,$files$$[$i$$].name.slice(0,-5));return}this.checkJavaFile($files$$[0],0,{success:function($mainclass$$){$done$$.call(this,$mainclass$$)},
failure:function($index$$,$options$$){$index$$>=$files$$.length-1?$done$$.call(this,""):this.checkJavaFile($files$$[$index$$+1],$index$$+1,$options$$)},scope:this})},guessScalaMainClass:function($files$$,$done$$){for(var $i$$=0;$i$$<$files$$.length;$i$$++){if(/^[Mm]ain\.scala$/.test($files$$[$i$$].name)){$done$$.call(this,$files$$[$i$$].name.slice(0,-6));return}if(/^[Mm]ain\.sc$/.test($files$$[$i$$].name)){$done$$.call(this,$files$$[$i$$].name.slice(0,-3));return}}this.checkScalaFile($files$$[0],
0,{success:function($mainclass$$){$done$$.call(this,$mainclass$$)},failure:function($index$$,$options$$){$index$$>=$files$$.length-1?$done$$.call(this,""):this.checkScalaFile($files$$[$index$$+1],$index$$+1,$options$$)},scope:this})},guessKotlinMainClass:function($files$$,$done$$){for(var $i$$32_mainclass$$=0;$i$$32_mainclass$$<$files$$.length;$i$$32_mainclass$$++)if(/^[Mm]ain\.kt$/.test($files$$[$i$$32_mainclass$$].name)){$i$$32_mainclass$$=$files$$[$i$$32_mainclass$$].name.slice(0,-3);$i$$32_mainclass$$=
$i$$32_mainclass$$.charAt(0).toUpperCase()+$i$$32_mainclass$$.slice(1)+"Kt";$done$$.call(this,$i$$32_mainclass$$);return}this.checkKotlinFile($files$$[0],0,{success:function($mainclass$$){$done$$.call(this,$mainclass$$)},failure:function($index$$,$options$$){$index$$>=$files$$.length-1?$done$$.call(this,""):this.checkKotlinFile($files$$[$index$$+1],$index$$+1,$options$$)},scope:this})},guessPascalMainFile:function($files$$,$done$$){for(var $i$$=0;$i$$<$files$$.length;$i$$++)if(/^[Mm]ain\.pas$/.test($files$$[$i$$].name)){$done$$.call(this,
$files$$[$i$$].name);return}this.checkPascalFile($files$$[0],0,{success:function($mainclass$$){$done$$.call(this,$mainclass$$)},failure:function($index$$,$options$$){$index$$>=$files$$.length-1?$done$$.call(this,""):this.checkPascalFile($files$$[$index$$+1],$index$$+1,$options$$)},scope:this})},guessLanguage:function($files$$,$done$$){for(var $len$$=$files$$?$files$$.length:0,$exts$$=[],$i$$=0;$i$$<$len$$;$i$$++)$exts$$.push($files$$[$i$$].name.split(".").reverse()[0]||"");for($i$$=0;$i$$<$len$$;$i$$++){var $file$$=
$files$$[$i$$],$ext$$=$exts$$[$i$$],$lang$$=this.languageFromExtension($ext$$,$exts$$);if("Java"===$lang$$){this.guessJavaMainClass($files$$,function($mainclass$$){$done$$.call(this,$lang$$,$mainclass$$)});return}if("Scala"===$lang$$){this.guessScalaMainClass($files$$,function($mainclass$$){$done$$.call(this,$lang$$,$mainclass$$)});return}if("Kotlin"===$lang$$){this.guessKotlinMainClass($files$$,function($mainclass$$){$done$$.call(this,$lang$$,$mainclass$$)});return}if(null!==$lang$$){$done$$.call(this,
$lang$$);return}if("py"===$ext$$){this.readFile($file$$,{success:function($data$$){$done$$.call(this,this.isPython2($data$$)?"Python 2":"Python 3")},failure:function(){$done$$.call(this,"Python 3")},scope:this});return}}$done$$.call(this)},update_file_list:function($file_input$$){var $list_parent$$=jQuery($file_input$$).parent();$list_parent$$.removeClass("has_files");if(0!==$file_input$$.files.length){$list_parent$$.addClass("has_files");$list_parent$$=$list_parent$$.find(".file_list");$list_parent$$.empty();
for(var $i$$=0;$i$$<$file_input$$.files.length;++$i$$)$list_parent$$.append(jQuery("<li/>").text($file_input$$.files[$i$$].name))}},onSubmissionFilesChanged:function($e$$){var $sub_files$$=$e$$.target;this.hideEditor(this.data.editor_id);jQuery("#cancel").prop("disabled",!1);this.guessLanguage($sub_files$$.files,function($lang$$,$mainclass$$){if($lang$$&&this.isLanguageAvailable($lang$$)){var $language_box$$=jQuery("#language_select");$language_box$$.val($lang$$);$language_box$$.trigger("change")}this.fileDialogEnabled($sub_files$$,
$mainclass$$)});var $problem_box$$=jQuery("#problem_select");$problem_box$$&&!$problem_box$$.val()&&this.guessProblem($sub_files$$.files,function($name$$){$problem_box$$.val($name$$);$problem_box$$.trigger("change")});this.update_file_list($sub_files$$)},onSubmissionFilesKeypressed:function($e$$){13===$e$$.which&&$e$$.ctrlKey&&this.submitForm($e$$.target.form)},onSwitchToEditor:function(){this.showEditor(this.data.editor_id);jQuery("#file_dialog").hide();jQuery("#editor_dialog").show();jQuery("#cancel").prop("disabled",
!1);this.editorEnabled()},onSwitchToFileUpload:function(){this.hideEditor(this.data.editor_id);jQuery("#file_dialog").show();jQuery("#editor_dialog").hide();jQuery("#cancel").prop("disabled",!0)},onCancelClicked:function(){window.location=this.data.location}});jQuery.extend(jQuery.ns("Kattis.views.recruiting.view_candidate"),function(){var $internal$$={MIN_DIFFICULTY:1,MAX_DIFFICULTY:10,PDF_CURVE_STEPS:30,init:function(){this.checkModalDialogs();this.data.has_recruiter_rights||this.drawGraph();this.initTests()},checkModalDialogs:function(){["#assign-tasks","#request-ratings","#request-test"].forEach(function($dialog$$){window.location.hash===$dialog$$&&jQuery($dialog$$).modal("show")})},initTests:function(){var $test_summary$$=jQuery("#test-summary");$test_summary$$.circliful();
0!=this.data.tests.length&&jQuery(".circle-text-half").replaceWith(function(){var $score$$=jQuery.trim(jQuery(this).text()),$link$$=jQuery.trim($test_summary$$.data("link"));$link$$&&($score$$='<a href="'+$link$$+'">'+$score$$+"</a>");return'<span class="circle-text-half" style="line-height: 179.31px; font-size: 40px;">'+$score$$+"</span>"})},getPixelRatio:function($context$$){return(window.devicePixelRatio||1)/($context$$.backingStorePixelRatio||$context$$.webkitBackingStorePixelRatio||$context$$.mozBackingStorePixelRatio||
$context$$.msBackingStorePixelRatio||$context$$.oBackingStorePixelRatio||$context$$.backingStorePixelRatio||1)},rayleigh:function($x$$){var $s2$$=Math.pow(2.8385,2);return $x$$/$s2$$*Math.exp(-($x$$*$x$$)/(2*$s2$$))},renderPDFcurve:function($canvas$$,$context$$){for(var $pdf_curve$$=[],$max_pdf$$=0,$i$$=0;$i$$<this.PDF_CURVE_STEPS;++$i$$){var $x$$=(this.MAX_DIFFICULTY-this.MIN_DIFFICULTY)*$i$$/this.PDF_CURVE_STEPS+this.MIN_DIFFICULTY,$y$$=this.rayleigh($x$$),$max_pdf$$=Math.max($max_pdf$$,$y$$);$pdf_curve$$.push([$x$$,
$y$$])}var $height$$=$canvas$$.height,$width$$=$canvas$$.width;$context$$.translate(0,-77.5);$context$$.beginPath();$context$$.moveTo(0,$height$$);for($i$$=0;$i$$<$pdf_curve$$.length;++$i$$)$x$$=$pdf_curve$$[$i$$][0]*$width$$/(this.MAX_DIFFICULTY-this.MIN_DIFFICULTY+1),$y$$=$height$$-0.9*($pdf_curve$$[$i$$][1]*($height$$-77.5)/$max_pdf$$),$context$$.lineTo($x$$,$y$$);$context$$.lineTo($x$$,$height$$);$context$$.closePath();$context$$.fillStyle="#E7E7E7";$context$$.fill()},drawGraphTail:function($canvas$$,
$context$$){if(this.data.is_set_hardest_accepted){var $height$$=$canvas$$.height,$width$$=$canvas$$.width;$context$$.globalCompositeOperation="source-atop";$context$$.beginPath();var $arr$$=this.data.hardest_accepted_array,$after$$=this.data.hardest_accepted_after;$context$$.moveTo($arr$$.problem_difficulty*($width$$/10)-50,50);$context$$.lineTo($after$$.problem_difficulty*($width$$/10)-50,50);$context$$.lineTo($after$$.problem_difficulty*($width$$/10)-50,$height$$);$context$$.lineTo($arr$$.problem_difficulty*
($width$$/10)-50,$height$$);$context$$.closePath();$context$$.fillStyle="#449fe1";$context$$.fill();$context$$.globalCompositeOperation="source-over"}},drawBreakpoint:function($canvas$$,$context$$){for(var $height$$=$canvas$$.height,$width$$=$canvas$$.width,$bps$$=[this.data.recommendation_limit],$breakpoint_offsets$$=[],$i$$=0;$i$$<$bps$$.length;$i$$++)$breakpoint_offsets$$.push($bps$$[$i$$]*($width$$/10)-50);for($i$$=0;$i$$<$breakpoint_offsets$$.length;$i$$++)$context$$.beginPath(),$context$$.lineWidth=
10,$context$$.strokeStyle="black",$context$$.moveTo($breakpoint_offsets$$[$i$$],20),$context$$.lineTo($breakpoint_offsets$$[$i$$],$height$$),$context$$.strokeStyle="#f0b034",$context$$.stroke()},drawXAxisTicks:function($canvas$$,$context$$){for(var $height$$=$canvas$$.height,$width$$=$canvas$$.width,$i$$=1;$i$$<=this.MAX_DIFFICULTY;$i$$++)$context$$.font="bold 24px Arial",$context$$.fillStyle="#1E1E1E",$context$$.fillText($i$$,$width$$/10*$i$$-57,$height$$+36)},drawProblemsInfo:function($canvas$$,
$context$$){for(var $height$$=$canvas$$.height,$width$$=$canvas$$.width,$draw$$=[],$offsets$$=[],$offset_cols$$=[],$i$$0$$=0;$i$$0$$<this.data.values_to_plot.length;++$i$$0$$){var $v$$=this.data.values_to_plot[$i$$0$$];$draw$$.push($v$$.problem_difficulty);!0==$v$$.solved?$offset_cols$$.push("#52BB50"):!1==$v$$.solved?$offset_cols$$.push("#F20708"):$offset_cols$$.push("#C7C7C7")}for($i$$0$$=0;$i$$0$$<$draw$$.length;$i$$0$$++)$offsets$$.push($draw$$[$i$$0$$]*($width$$/10)-50);for(var $height_top_offset$$=
this.data.height_top_offset,$i$$0$$=0;$i$$0$$<$offsets$$.length;$i$$0$$++)$context$$.beginPath(),$context$$.lineWidth=2,$context$$.strokeStyle="black",$context$$.moveTo($offsets$$[$i$$0$$],$height_top_offset$$),$context$$.lineTo($offsets$$[$i$$0$$],$height$$),$context$$.stroke();$offsets$$.forEach(function($a$$,$i$$){$context$$.beginPath();$context$$.arc($a$$,$height_top_offset$$,10,0,2*Math.PI,!1);$context$$.fillStyle=$offset_cols$$[$i$$];$context$$.fill();$context$$.lineWidth=2;$context$$.stroke()})},
drawGraph:function(){var $initial_width$$=this.data.initial_width,$canvas$$=document.getElementById("curve"),$context$$=$canvas$$.getContext("2d");$canvas$$.width=2*$initial_width$$;$canvas$$.height=360;$canvas$$.style.width=$initial_width$$+"px";$canvas$$.style.height="180px";$context$$.scale(this.getPixelRatio,this.getPixelRatio);this.renderPDFcurve($canvas$$,$context$$);this.drawXAxisTicks($canvas$$,$context$$);this.drawGraphTail($canvas$$,$context$$);this.drawBreakpoint($canvas$$,$context$$);
this.drawProblemsInfo($canvas$$,$context$$)}},$initialized$$=!1;return{init:function(){$initialized$$||($initialized$$=!0,$internal$$.data=this.data,this.data=null,$internal$$.init())}}}());jQuery.extend(jQuery.ns("Kattis.views.admin.course_offering_edit"),function(){var $internal$$={init:function(){this.createBtn=jQuery(".create-btn");jQuery(".field_toggle_null").on("change",this.onCheckboxClick.bind(this));jQuery("#offering_offering_short_name").on("keyup input",this.onOfferingShortNameChanged.bind(this));jQuery("#offering_offering_end").on("change keyup input",this.onOfferingEndChanged.bind(this));jQuery("#offering_offering_registration_key").on("change keyup input",this.onRegistrationKeyChanged.bind(this));
jQuery(".course-offering-form input[pattern], .course-offering-form input[type=checkbox]").on("change keyup input",this.onFormFieldChanged.bind(this));this.initTeachers();this.initProblemgroups()},initTeachers:function(){this.teacher_tbody=jQuery(".table-teachers tbody");this.teacher_tmpl=tmpl("teacher_tmpl");jQuery(".add-teacher-btn").on("click",this.onAddTeacher.bind(this));jQuery(".add-teacher-username").bind("change keyup input",function(){jQuery(".add-teacher-btn").prop("disabled",""===jQuery(this).val())});
jQuery(".add-teacher-username").keypress(function($e$$){if(13==$e$$.keyCode&&!jQuery(".add-teacher-btn").prop("disabled"))return jQuery(".add-teacher-btn").click(),$e$$.preventDefault(),!1});this.data.teachers.forEach(function($teacher$$,$index$$){this.addTeacherRow({teacher_no:$index$$,name:$teacher$$.name,username:$teacher$$.username,link:Kattis.API.user_view+"/"+$teacher$$.username},!1)},this);this.teacher_no=this.data.teachers.length},initProblemgroups:function(){this.problemgroup_tbody=jQuery(".table-problemgroups tbody");
this.problemgroup_tmpl_old=tmpl("problemgroup_tmpl_old");this.problemgroup_tmpl_new=tmpl("problemgroup_tmpl_new");jQuery(".add_problemgroup").on("click",this.onAddProblemGroup.bind(this));jQuery("#input_problem_group_name").select2({allowClear:!0,createSearchChoice:function($term$$,$data$$){if(0===jQuery($data$$).filter(function(){return 0===this.text.localeCompare($term$$)}).length)return{id:"0",text:$term$$,exists:!1}},data:this.data.all_problemgroups.map(function($pg$$){return{id:$pg$$.id,text:$pg$$.name,
exists:!0}}),formatResult:function($obj$$,$container$$,$query$$,$escapeMarkup$$){return $obj$$.exists?$escapeMarkup$$($obj$$.text):$escapeMarkup$$($obj$$.text)+" <i>(new)</i>"}});this.data.problemgroups.forEach(function($pg$$,$index$$){var $link$$=$pg$$.id?Kattis.API.problemgroup_edit.replace("{0}",$pg$$.id):"";this.addProblemgroupRow({problemgroup_no:$index$$,id:$pg$$.id,name:$pg$$.name,link:$link$$},!1)},this);this.problemgroup_no=this.data.problemgroups.length},addTeacherRow:function($teacher$$,
$animate$$){var $row$$=jQuery(this.teacher_tmpl($teacher$$)),$animated$$=$animate$$?$row$$.children("td"):jQuery();$row$$.find(".remove-teacher-btn").bind("click",this.onRemoveTeacher.bind(this));$animated$$.attr("style","display: none;");this.teacher_tbody.append($row$$);$animated$$.slideDown("fast")},addProblemgroupRow:function($problemgroup$$,$animate$$){var $row$$=jQuery((void 0===$problemgroup$$.id?this.problemgroup_tmpl_new:this.problemgroup_tmpl_old)($problemgroup$$)),$animated$$=$animate$$?
$row$$.children("td"):jQuery();$row$$.find(".remove-problemgroup-btn").bind("click",this.onRemoveProblemGroup.bind(this));$animated$$.attr("style","display: none;");this.problemgroup_tbody.append($row$$);$animated$$.slideDown("fast")},removeTableRow:function($tr_el$$){$tr_el$$.children("td").slideUp("fast",function(){$tr_el$$.remove()})},isValid:function(){for(var $pattern_fields$$=jQuery(".course-offering-form input[pattern]:not([disabled])").toArray(),$invalid_fields_isValid$$=jQuery(".course-offering-form .form-group.has-error"),
$i$$=jQuery(".course-offering-form span.fa"),$invalid_fields_isValid$$=0==$invalid_fields_isValid$$.length&&0==$i$$.length,$i$$=0;$i$$<$pattern_fields$$.length;++$i$$)var $input$$=jQuery($pattern_fields$$[$i$$]),$invalid_fields_isValid$$=$invalid_fields_isValid$$&this.isPatternFieldValid($input$$);return $invalid_fields_isValid$$},updateCreateBtn:function(){this.createBtn.prop("disabled",!this.isValid())},onFormFieldChanged:function($e$$){9==$e$$.keyCode||16==$e$$.keyCode||(jQuery($e$$.target).closest("div.form-group").addClass("has-warning"),
this.updateCreateBtn())},toggleInputValidation:function($input$$,$isValid$$){$input$$.parents(".form-group").toggleClass("has-error",!$isValid$$)},isPatternFieldValid:function($input$$){return RegExp($input$$.attr("pattern")).test($input$$.val())},validatePatternField:function($input$$){var $isValid$$=this.isPatternFieldValid($input$$);this.toggleInputValidation($input$$,$isValid$$);return $isValid$$},onRegistrationKeyChanged:function($e$$){this.validatePatternField(jQuery($e$$.target))},onOfferingEndChanged:function($e$$29_input$$){$e$$29_input$$=
jQuery($e$$29_input$$.target);var $isValid$$4_value$$=$e$$29_input$$.val();this.validatePatternField($e$$29_input$$)&&($isValid$$4_value$$="infinity"==$isValid$$4_value$$||Kattis.util.isValidDate($isValid$$4_value$$),this.toggleInputValidation($e$$29_input$$,$isValid$$4_value$$))},onOfferingShortNameChanged:function($e$$){var $input$$=jQuery($e$$.target),$span$$=$input$$.parent().children("span"),$value$$=$input$$.val();this.call_id=(this.call_id||0)+1;this.hintTimeout&&(clearTimeout(this.hintTimeout),
this.hintTimeout=null);this.validatePatternField($input$$)?this.data.offering_short_name==$value$$?($span$$.removeClass("fa fa-spinner fa-spin glyphicon glyphicon-remove text-danger glyphicon glyphicon-ok text-success"),this.toggleInputValidation($input$$,!0)):($span$$.removeClass("fa fa-spinner fa-spin glyphicon glyphicon-remove text-danger glyphicon glyphicon-ok text-success").addClass("fa fa-spinner fa-spin"),this.createBtn.prop("disabled",!0),this.hintTimeout=setTimeout(function($call_id$$){jQuery.ajax({type:"GET",
url:Kattis.API.ajax_course_offering_short_name_available,data:{course_short_name:this.data.course_short_name,offering_short_name:$value$$},context:this}).always(function(){$span$$.removeClass("fa fa-spinner fa-spin glyphicon glyphicon-remove text-danger glyphicon glyphicon-ok text-success")}).done(function($result$$){$call_id$$===this.call_id&&(this.toggleInputValidation($input$$,$result$$.response.available),$span$$.addClass($result$$.response.available?"glyphicon glyphicon-ok text-success":"glyphicon glyphicon-remove text-danger"),
this.updateCreateBtn())}).fail(function(){$call_id$$===this.call_id&&(this.toggleInputValidation($input$$,!1),$span$$.addClass("glyphicon glyphicon-remove text-danger"),this.updateCreateBtn())})}.bind(this),750,this.call_id)):$span$$.removeClass("fa fa-spinner fa-spin glyphicon glyphicon-remove text-danger glyphicon glyphicon-ok text-success")},onCheckboxClick:function($checked_e$$){var $checkbox_id$$4_input$$=jQuery($checked_e$$.target);$checked_e$$=$checkbox_id$$4_input$$.prop("checked");$checkbox_id$$4_input$$=
$checkbox_id$$4_input$$.data("toggleid");$checkbox_id$$4_input$$=jQuery("#"+$checkbox_id$$4_input$$);$checkbox_id$$4_input$$.prop("disabled",!$checked_e$$);$checked_e$$?this.validatePatternField($checkbox_id$$4_input$$):this.toggleInputValidation($checkbox_id$$4_input$$,!0)},onRemoveTeacher:function($e$$32_parameters$$){var $removeBtn$$=jQuery($e$$32_parameters$$.target);$removeBtn$$.prop("disabled",!0);var $tr$$=$removeBtn$$.closest("tr");this.data.is_new?(this.removeTableRow($tr$$),$tr$$.closest("div.form-group").addClass("has-warning"),
this.updateCreateBtn()):($e$$32_parameters$$={course_short_name:this.data.course_short_name,offering_short_name:this.data.offering_short_name,user_name:$tr$$.attr("data-username"),csrf_token:this.data.csrf_token},jQuery.ajax({type:"DELETE",url:Kattis.API.ajax_course_offering_teacher,contentType:"application/json",data:JSON.stringify($e$$32_parameters$$),context:this}).done(function(){this.removeTableRow($tr$$)}).fail(function($jqXHR$$){$removeBtn$$.prop("disabled",!1);var $base_msg$$=$removeBtn$$.data("fail-msg");
Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)}))},onAddTeacher:function($e$$){var $addBtn$$=jQuery($e$$.target),$input$$=jQuery(".add-teacher-username");$e$$=$input$$.val();$addBtn$$.prop("disabled",!0);var $options$$={always:function(){$input$$.focus()},done:function($resp$$){$input$$.val("");this.addTeacherRow({teacher_no:this.teacher_no++,username:$resp$$.response.username,name:$resp$$.response.name,link:Kattis.API.user_view+"/"+$resp$$.response.username},!0);this.data.is_new&&
($input$$.closest("div.form-group").addClass("has-warning"),this.updateCreateBtn())},fail:function($jqXHR$$){$addBtn$$.prop("disabled",!1);var $base_msg$$=$addBtn$$.data("fail-msg");Kattis.error.show_msg($base_msg$$+": ",$jqXHR$$.responseJSON.error.code)},scope:this};this.data.is_new?this.getAuthor($e$$,$options$$):this.postTeacher($e$$,$options$$)},postTeacher:function($username$$,$options$$){jQuery.ajax({type:"POST",url:Kattis.API.ajax_course_offering_teacher,contentType:"application/json",data:JSON.stringify({course_short_name:this.data.course_short_name,
offering_short_name:this.data.offering_short_name,user_name:$username$$,csrf_token:this.data.csrf_token}),context:$options$$.scope||this}).always($options$$.always).done($options$$.done).fail($options$$.fail)},getAuthor:function($username$$,$options$$){jQuery.ajax({type:"GET",url:Kattis.API.ajax_author,contentType:"application/json",data:{username:$username$$},context:$options$$.scope||this}).always($options$$.always).done($options$$.done).fail($options$$.fail)},onRemoveProblemGroup:function($e$$34_removeBtn$$){$e$$34_removeBtn$$=
jQuery($e$$34_removeBtn$$.target);this.removeTableRow($e$$34_removeBtn$$.closest("tr"));$e$$34_removeBtn$$.closest("div.form-group").addClass("has-warning");this.updateCreateBtn()},onAddProblemGroup:function(){var $input$$=jQuery("#input_problem_group_name"),$data$$33_pg$$=$input$$.select2("data"),$id$$=$data$$33_pg$$.id,$data$$33_pg$$={name:$data$$33_pg$$.text,problemgroup_no:this.problemgroup_no++};"0"!=$id$$&&($data$$33_pg$$.id=$id$$,$data$$33_pg$$.link=Kattis.API.problemgroup_edit.replace("{0}",
$id$$));this.addProblemgroupRow($data$$33_pg$$,!0);$input$$.closest("div.form-group").addClass("has-warning");this.updateCreateBtn();$input$$.select2("val","")}},$initialized$$=!1;return{init:function(){$initialized$$||($initialized$$=!0,$internal$$.data=this.data,this.data=null,$internal$$.init())}}}());jQuery.extend(jQuery.ns("Kattis.main"),{init:function(){jQuery(".selectify-this").select2();jQuery('[data-toggle="tooltip"]').tooltip();jQuery(".site-search > a").on("click",function(){jQuery(this).parent().find("input").focus()});jQuery(".site-search > input").on("focus",function(){jQuery(this).parent().addClass("active")});jQuery("body").on("click",function($e$$){jQuery(".site-search").each(function(){!jQuery(this).is($e$$.target)&&0===jQuery(this).has($e$$.target).length&&jQuery(this).removeClass("active")})});
jQuery("#filter li a").click(function($e$$36_text$$){$e$$36_text$$=jQuery(this).text();var $val$$=jQuery(this).parent().attr("data-value");jQuery("#main_filter_text").text($e$$36_text$$);jQuery("#filter_by").val($val$$);"all"===$val$$?jQuery("#filter_by_value").prop("disabled",!0):jQuery("#filter_by_value").prop("disabled",!1).focus()})}});var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};
function escapeHtml($string$$){return String($string$$).replace(/[&<>"'\/]/g,function($s$$){return entityMap[$s$$]})}function twodigit($x$$){return(10>$x$$?"0":"")+$x$$}
function format_interval($s$$6_seconds$$,$always_show_hours$$,$d$$){$always_show_hours$$="undefined"!==typeof $always_show_hours$$?$always_show_hours$$:!1;var $neg$$=0>$s$$6_seconds$$;$neg$$&&($s$$6_seconds$$=-$s$$6_seconds$$);$s$$6_seconds$$=Math.floor($s$$6_seconds$$);var $h$$=Math.floor($s$$6_seconds$$/3600),$m$$=Math.floor($s$$6_seconds$$/60)%60;$s$$6_seconds$$%=60;var $res$$="";"undefined"!==typeof $d$$&&$d$$&&($d$$=Math.floor($h$$/24),$h$$%=24,0<$d$$&&($always_show_hours$$=!0,$res$$+=$d$$+" day"+
(1!=$d$$?"s":"")+" "));if(0<$h$$||$always_show_hours$$)$res$$+=$h$$+":";$res$$+=twodigit($m$$)+":"+twodigit($s$$6_seconds$$);$neg$$&&($res$$="-"+$res$$);return $res$$}
function initContestHeader($has_start$$,$elapsed_seconds$$,$total_seconds$$){var $loaded_at$$=window.page_loaded_at;jQuery(function($$$$){var $contest_progress$$=$$$$(".contest-progress"),$update_session_info$$=function $$update_session_info$$$($cls$$,$val$$){$val$$&&!$contest_progress$$.hasClass($cls$$)?$contest_progress$$.addClass($cls$$):!$val$$&&$contest_progress$$.hasClass($cls$$)&&$contest_progress$$.removeClass($cls$$)},$before_long_interval$$=-600;$elapsed_seconds$$<$before_long_interval$$&&
($before_long_interval$$=-(300+300*Math.random()));var $last_before_long$$=$elapsed_seconds$$<$before_long_interval$$,$last_before$$=2>$elapsed_seconds$$;setInterval(function(){var $cur_second$$=Math.floor($elapsed_seconds$$+(new Date-$loaded_at$$)/1E3),$cur_before_long_session_nostart$$=$cur_second$$<$before_long_interval$$,$cur_before_prog_session_nearend$$=2>$cur_second$$;$has_start$$&&($last_before$$&&!$cur_before_prog_session_nearend$$||$last_before_long$$&&!$cur_before_long_session_nostart$$)&&
location.reload();$last_before_long$$=$cur_before_long_session_nostart$$;$last_before$$=$cur_before_prog_session_nearend$$;var $session_finished$$=$cur_before_prog_session_nearend$$=!1,$session_notstarted$$=!1,$cur_before_long_session_nostart$$=!1;$has_start$$?0>$cur_second$$?$session_notstarted$$=!0:$cur_second$$>=$total_seconds$$?$session_finished$$=!0:900>=$total_seconds$$-$cur_second$$&&($cur_before_prog_session_nearend$$=!0):($cur_before_long_session_nostart$$=!0,$cur_second$$=0);$update_session_info$$("session-nostart",
$cur_before_long_session_nostart$$);$update_session_info$$("session-notstarted",$session_notstarted$$);$update_session_info$$("session-nearend",$cur_before_prog_session_nearend$$);$update_session_info$$("session-finished",$session_finished$$);0>$cur_second$$&&$contest_progress$$.find(".countdown").text(format_interval(-$cur_second$$,!1,!0));$cur_second$$=Math.max(0,$cur_second$$);$cur_second$$=Math.min($total_seconds$$,$cur_second$$);$cur_before_prog_session_nearend$$=0;$cur_before_long_session_nostart$$||
($cur_before_prog_session_nearend$$=100*$cur_second$$/$total_seconds$$);$contest_progress$$.find(".count_elapsed").text(format_interval($cur_second$$,!0));$contest_progress$$.find(".count_remaining").text(format_interval($total_seconds$$-$cur_second$$,!0));$contest_progress$$.find(".progress-bar").css("width",$cur_before_prog_session_nearend$$.toString()+"%")},1E3)});return function($new_has_start$$,$new_elapsed_seconds$$,$new_total_seconds$$,$new_loaded_at$$){$has_start$$=$new_has_start$$;$elapsed_seconds$$=
$new_elapsed_seconds$$;$total_seconds$$=$new_total_seconds$$;$loaded_at$$=$new_loaded_at$$}}
jQuery.extend(jQuery.ns("Kattis"),function(){var $modules_map$$={"page-master-layout":Kattis.main,"page-contest-edit":Kattis.views.contest.edit,"page-contest-resolver":Kattis.views.contest.resolver,"page-submit":Kattis.views.submissions.create,"page-view-candidate":Kattis.views.recruiting.view_candidate,"page-course-offering-edit":Kattis.views.admin.course_offering_edit};return{init:function(){document.body.attributes["class"].value.split(/\s+/g).forEach(this.run_module,this)},run_module:function($page$$){$modules_map$$[$page$$]&&
$modules_map$$[$page$$].init.call($modules_map$$[$page$$])}}}());jQuery(Kattis.init.bind(Kattis));
//# sourceMappingURL=system.js.map
